<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>CommentAPI Mapping Elements</title>
  <meta name="description" content="I have updated the CommentAPI to incorporate feedback and added a table that summarizes the mappings from the other services to the CommentAPI. As always, fe...">
  <meta name="google-site-verification" content="vZSL2JjLp0S_VXH743XRWWgko2D6B124A8pUAqT4FFk" />

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://bitworking.org/news/2003/03/63">
  <link rel="alternate" type="application/atom+xml" title="BitWorking" href="/news/feed/">
  <link rel="author" href="/about/">
  <link href="https://bitworking.org/u/webmention" rel="webmention" />
  <script async defer src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_CHTML'></script>
  <meta name="twitter:site"    content="@bitworking">
  <meta name="twitter:creator" content="@bitworking">
  <meta name="twitter:title"   content="CommentAPI Mapping Elements">
  <meta name="twitter:description" content="  I have updated the CommentAPI to incorporate feedback
   and added a table that summarizes the
   mappings from the other services to the CommentAPI. As always, feedback is encouraged.


">
  <meta name="twitter:card"  content="summary">
  <meta name="twitter:image" content="https://bitworking.org/images/newlogo.png">

  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1974123-1', 'auto');
  ga('send', 'pageview');

</script>
  

  
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
    
    
    <a class="site-title" href="/">BitWorking</a>
  
    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
            <a class="page-link" href="/about/">About</a>
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
        </div>
      </nav>
    
  </div>
</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">CommentAPI Mapping Elements</h1>
    <p class="post-meta">
      <a class="u-url" href="/news/2003/03/63">
        <time datetime="2003-03-19T00:00:00-05:00" itemprop="datePublished" class="dt-published">
          
          Mar 19, 2003
        </time>
      </a>
      â€¢ <a rel="author" class="p-author h-card" href="/about"> <span itemprop="author"
          itemscope itemtype="http://schema.org/Person">
          <img class="u-photo" src="/images/joe2016.jpg" alt="" style="height: 16px; border-radius: 8px; margin-right: 4px;" />
          <span
            itemprop="name">Joe Gregorio</span></span></a>
      </p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
      <p>I have updated the CommentAPI to incorporate <a href="http://bitworking.org/news/61">feedback</a>
   and added a table that <a href="http://wellformedweb.org/story/9#SummaryTable">summarizes</a> the
   mappings from the other services to the CommentAPI. As always, feedback is encouraged.
</p>

  <div class="commentContent" id="X1">
    Phil, I didn't forget your <a href="http://bitworking.org/news/61#X2">feedback</a> for link, it's just that I don't think it's possible. How could the person submitting the comment know what the perma-link should be?

    <p class="commentByLine">Posted by
       <a href="http://bitworking.org">Joe</a> on <a href="#X1" title="2003-03-19T09:59:23">2003-03-19</a>
    </p>
</div><div class="commentContent" id="X2">
    That's where I was trying to head by asking what you return: I post a linkless fragment with my site URL in some other element, you return essentially the same fragment (possibly with my HTML stripped from the text because your comment rules prohibit it) but with the permalink inserted in link.

Stripping HTML reminds me that it would be nice to have some way of saying that you want a preview, that you are only POSTing to find out what's going to be done to your text.
    <p class="commentByLine">Posted by
       <a href="http://philringnalda.com">Phil Ringnalda</a> on <a href="#X2" title="2003-03-19T10:28:17">2003-03-19</a>
    </p>
</div><div class="commentContent" id="X3">
    Hmmm, that's an interesting idea, returning the altered RSS 'item' from the POST. It would also be real easy to implement.
    <p class="commentByLine">Posted by
       <a href="http://bitworking.org">Joe</a> on <a href="#X3" title="2003-03-19T14:15:29">2003-03-19</a>
    </p>
</div><div class="commentContent" id="X4">
    What would happen if the app didn't support permalinked comments? would the returned URL simply be that of the corresonding post perhaps?

Still wondering what is happening with regards to namespaces withing the item fragment. Will the spec demand(?) that the appropriate namespace definitions are included in the item element?

Joe, thanks for the summary table, makes everything a lot easier to understand somehow :-) It's good to see that the major (current) uses all seem to fit quite nicely within standard RSS 2.0 too.
    <p class="commentByLine">Posted by
       <a href="http://www.xasperate.com">Adrian</a> on <a href="#X4" title="2003-03-19T16:31:14">2003-03-19</a>
    </p>
</div><div class="commentContent" id="X5">
    Adrian,
   If there weren't perma-links then the 'link' tag wouldn't be updated. More generally, any of the elements could be updated, for example the HTML could be stripped, elements and attributes in unknown namespaces removed, etc.

   I'm thinking that maybe the best way to handle this is the Location: header. That is, do not return the altered 'item' from the POST operation, but instead return it's location in the Location: header. Thus if you are interested in it you could do a GET on that URI to retreive the 'item'. This makes the XML available for the people that want it but saves traffic in the majority of cases where you will only want to know that the comment was successfully accepted.

  As far as namespaces, yes, all the namespaces _used_ in a document will have to be declared in that document.
    <p class="commentByLine">Posted by
       <a href="http://bitworking.org">Joe</a> on <a href="#X5" title="2003-03-20T08:20:26">2003-03-20</a>
    </p>
</div><div class="commentContent" id="X6">
    Maybe I missed it somewhere, but what exactly should be returned in response to a POST if the comment does not generate a permalink?  For Jot, posting a comment (through the HTML form) will redirect you (via 303 See Other) to the entry now containing the comment. In this case, however, should I just return a 200 and a copy of the RSS item?

Also, since I am not storing RSS and not all possible elements will be significant, should I still return those non-significant elements in the returned RSS item or should the item contain only the elements that were significant to Jot?
    <p class="commentByLine">Posted by
       <a href="http://www/seairth.com/blog">Seairth</a> on <a href="#X6" title="2003-03-20T12:19:27">2003-03-20</a>
    </p>
</div><div class="commentContent" id="X7">
    *argh* sorry about the prior link.  Appearently, I typed it in wrong.
    <p class="commentByLine">Posted by
       <a href="http://www.seairth.com/blog">Seairth</a> on <a href="#X7" title="2003-03-20T12:21:54">2003-03-20</a>
    </p>
</div><div class="commentContent" id="X8">
    Joe,
Thanks, very helpful. I hadn't figured that it was acceptable to only take what the app wants from the incoming 'item'.

I'm not sure how much control ASP gives of the location: header for returning the URI of the 'item'. Will have to do some research on that one :-)
In ASP the XMLHTTP component just returns whatever is response.write written from the receiving ASP page. Whether that appears as/in (?) Location: header I don't have a clue.

Can the wfw:comment be used either within any TrackBack RDF or standalone on the HTML page as well as within the RSS feed? The <link /> tag ain't going to be much use in BlogWorks and stacking a whole pile of them up in the <head> tag may not be such a good idea if most apps will just be looking for a single <link /> tag.</head>
    <p class="commentByLine">Posted by
       <a href="http://www.xasperate.com">Adrian</a> on <a href="#X8" title="2003-03-20T12:25:28">2003-03-20</a>
    </p>
</div><div class="commentContent" id="X9">
    Seairth,
I'd assumed that what was returned was the item with modifications made that would reflect how the app was using the information sent.

Joe,
Thinking about Phil's comment about preview and also thinking about how to differentiate the 'items' that come into the system would it be either possible or desirable to add two elements to the wfw namespace:

&lt;wfw:preview&gt; which would contain a boolean true if a preview was wanted by the calling app. The return would be the same as the standard return - modified 'item' but the nothing would be saved by the receiving app.

Secondly
&lt;wfw:type&gt; (or some such...) which would contain information about the type of item being sent - Comment, TrackBack, Post-It etc. This would enable systems that don't support certain types of 'incoming' to weed them out quickly. The list of approved names would expand as more methods of sending comments around increases.

I honestly don't know if that is where you want the spec to head so I make the suggestion hesitantly and being quite willing for the answer to be 'no'.
    <p class="commentByLine">Posted by
       <a href="http://www.xasperate.com">Adrian</a> on <a href="#X9" title="2003-03-20T13:31:48">2003-03-20</a>
    </p>
</div><div class="commentContent" id="X10">
    Adrian,
   I don't know if I want to consider those additions just yet. I would rather opt for a simpler specification up front and only add features later after seeing how this stuff operates in the wild.
   Can you write up how you think the wfw:comment tag could be incorporated in the TrackBack RDF?
   

Seairth,
    Just returning any HTTP success code should be acceptable. I.e. any of the 2xx or 3xx codes, if they are used appropriately.

    <p class="commentByLine">Posted by
       <a href="http://bitworking.org">Joe</a> on <a href="#X10" title="2003-03-20T23:21:55">2003-03-20</a>
    </p>
</div><div class="commentContent" id="X11">
    If I was going to use the wfw:comment in RDF I'd probably do:
&lt;rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/"
	xmlns:wfw="http://wellformedweb/CommentAPI/"&gt;
&lt;rdf:Description
	rdf:about="http://www.mysite.com/200303archive001.asp#1047583263001"
	dc:identifer="http://www.mysite.com/200303archive001.asp#1047583263001"
	dc:title="Test"
	trackback:ping="http://www.mysite.com/trackback.asp?id=1047583263001"
	wfw:comment="http://www.mysite.com/commentapi.asp?id=1047583263001" /&gt;
&lt;/rdf:RDF&gt;

(All URLs are fictional but of the style produced by BlogWorks)

Although, to be honest I'd be tempted to just add it above each post as it's own element as used in the RSS feed of the site and forget the RDF.

On another track... At the moment pingbacks, trackbacks etc. etc. send back their own particular "success" messages. Is the idea of the CommentAPI to have a standard response to any of these different types of calls? So, trackback, pingback all return exactly the same thing - the modified item that shows how the received information is going to be, or is being, used.

I presume that eventually one won't want to distinguish between types of 'item' received, hence no need of a &lt;wfw:type&gt; element. 
What happens then with some of the stuff that Ben Hammersley writes about at http://www.benhammersley.com/archives/003862.html such as BackTrack that presumably comes in in a similar fashion to TrackBack but needs a different kind of response from the modified item? Would the receiving app just have to recognize by any extra namespaced elements in the 'item' that this is a BackTrack rather than a TrackBack?
    <p class="commentByLine">Posted by
       <a href="http://www.xasperate.com">Adrian</a> on <a href="#X11" title="2003-03-21T12:05:33">2003-03-21</a>
    </p>
</div><div class="commentContent" id="X12">
    <p>What if the site requires some sort of authentication prior to accepting the fragment? (site owner may require registration prior to posting)</p>
<p>would it be an idea to add a &lt;auth usr="whatever" pwd="whatever"&gt; to the post fragment?</p>

    <p class="commentByLine">Posted by
       <a href="mailto:nospam@nospam.com">Jay</a> on <a href="#X12" title="2005-10-13T19:47:07">2005-10-13</a>
    </p>
</div>
  

  </div>

  <script type="text/javascript" charset="utf-8">
    fetch('/u/mentions').then(function(resp) {
      if (!resp.ok) {
        return
      }
      resp.text().then(function(text) {
        document.getElementById('mentions').innerHTML = text;
      });
    });
  </script>
  <div id=mentions>
  </div>

  
    

  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = 'https://bitworking.org/news/2003/03/63';
      this.page.identifier = 'https://bitworking.org/news/2003/03/63';
    };

    (function() {
      var d = document, s = d.createElement('script');

      s.src = 'https://bitworking-1.disqus.com/embed.js';

      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


  
</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    
    <div class="PageNavigation">
      
      <a class="prev" href="/news/2003/03/62">&laquo;
        Pushing Back</a>
      
      
      <a class="next"
        href="/news/2003/03/64">SourceForge now sporting RSS 2.0 feeds &raquo;</a>
      
    </div>
    

    <h2 class="footer-heading">BitWorking</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>
            
              BitWorking
            
            </li>
            
            <li><a rel=me class="u-email" href="mailto:joe@bitworking.org">joe@bitworking.org</a></li>
            
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/jcgregorio" rel=me><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">jcgregorio</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/bitworking" rel=me><span class="icon icon--twitter"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">bitworking</span></a>

          </li>
          

          <li>
            <a href="https://plus.google.com/+JoeGregorio" rel=me>
              <svg enable-background="new 0 0 128 128" height="16px" viewBox="0 0 128 128" width="16px" xml:space="preserve">
                <circle cx="64" cy="64" fill="gray" r="64"/>
                <path d="M49.424,97.875c-19.018,0-34.491-15.193-34.491-33.874c0-18.68,15.473-33.875,34.491-33.875 c8.318,0,16.354,2.952,22.624,8.309l-8.771,9.899c-3.838-3.279-8.758-5.086-13.853-5.086c-11.652,0-21.13,9.31-21.13,20.752 c0,11.441,9.479,20.75,21.13,20.75c9.858,0,16.311-4.723,18.407-13.197H49.587V58.432h32.347v6.562 C81.934,84.659,68.869,97.875,49.424,97.875z"
                fill="#FFFFFF"/>
                <polygon fill="#FFFFFF" points="117.934,58.438
                107.934,58.438 107.934,48.438 99.934,48.438 99.934,58.438
                89.934,58.438     89.934,66.438 99.934,66.438 99.934,76.438
                107.934,76.438 107.934,66.438 117.934,66.438   "/>
              </svg>
              <span class="username">JoeGregorio</span></a>
          </li>
        </ul>
      </div>

      <div class="h-card footer-col footer-col-3">
        <p class="p-note">Joe Gregorio - REST, Web, Python, Go, APIs, Dad, Husband, Maker, or any linear combination of such. Googler.
</p>
        <a class="p-name u-url" href="https://bitworking.org" style="display: none"><img
          class="u-photo" src="/images/joe2016.jpg" alt="" />Joe Gregorio</a>
        <a rel=me class="u-email" href="mailto:joe@bitworking.org">joe@bitworking.org</a>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
