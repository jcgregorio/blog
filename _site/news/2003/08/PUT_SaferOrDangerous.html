<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>The HTTP verb PUT under Apache Safe or Dangerous?</title>
  <meta name="description" content="&quot;Is the HTTP verb PUT under Apache safe or dangerous?&quot; This is a question I come across often, and have now run into it twice in the work on Atom. So is it s...">
  <meta name="google-site-verification" content="vZSL2JjLp0S_VXH743XRWWgko2D6B124A8pUAqT4FFk" />

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://bitworking.org/news/2003/08/PUT_SaferOrDangerous">
  <link rel="alternate" type="application/atom+xml" title="BitWorking" href="/news/feed/">
  <link rel="author" href="/about/">
  <link href="https://bitworking.org/u/webmention" rel="webmention" />
  <script async defer src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_CHTML'></script>
  <meta name="twitter:site"    content="@bitworking">
  <meta name="twitter:creator" content="@bitworking">
  <meta name="twitter:title"   content="The HTTP verb PUT under Apache Safe or Dangerous?">
  <meta name="twitter:description" content="  "Is the HTTP verb PUT under Apache safe or dangerous?" This is a question I come across often, and have now 
  run into it twice in the work on Atom. So is it safe? The answer is maybe.
  Here are two such examples:

  Using DELETE and PUT may be the "right thing to do" 
  in an ideal world, but the fact of the matter is that a 
  lot -- if not the vast majority -- of webservers do not allow these 
  operations. 
If anyone knows of a newer article describing 
  HTTP PUT with apache, I would be very interested in seeing it. Because, 
  due to my experience with PUT, you have to define a single PUTScript in 
  httpd.conf, and if you PUT something to an apache server at the URI 
  www.example.com/blog/entries/1 or something similar, apache passes all 
  of the information to the PUTScript, not to anything else.
Both of the above quotes are from the Atom Wiki discussion 
  of the use of PUT. A little digging reveals that the ApacheWeek article 
  Publishing Pages with PUT 
  is referenced most often when the danger of PUT is raised. 
That ApacheWeek article does talk about the dangers of PUT and
  the cautions you need to follow when writing a script that
  does content publishing via PUT. That key part of that phrase
  is content publishing. That means that PUT is being 
  used to upload arbitrary content to the server and the client
  is determining via the URI where the content should be stored.
  Now you can imagine how this might be dangerous, for example
  not correctly checking URI paths that include ../.. could
  let a malicious agent re-write your .bashrc.
Implementing a PUT script can be difficult and a security hazard
   in the context of content publishing, but that's the case because
   the client is choosing the target URI and the client could upload
   any content type. In the case of Web Services in general, and
   the AtomAPI in particular, PUT is used in a much narrower manner
   and avoids those potential security problems.
In the case of the AtomAPI PUT is only allowed on URIs that point 
   to a pre-existing resource. The
   AtomAPI follows a general idiom for editing resources of doing 
   a GET to retrieve the original XML, then a PUT on the same URI
   to upate that resource with the edited XML. No URIs are created 
   by doing a PUT. PUT is not accepted on arbitrary URIs. This makes
   the use of PUT in the context of the AtomAPI just as safe as POST.
There are quite a few ways to configure Apache to process
   incoming requests. In particular it is possible to have a single
   script that handles all PUT requests below a chosen directory. This 
   strategy, and all of the associated security concerns associated with
   it, are covered fully in the Publishing Pages with PUT.
When processing request with a CGI script all the PUT requests
   will come through. The verb is passed to the CGI program via the REQUEST_METHOD environment 
   variable, and the program decides what to do with the content.
Using PUT propoerly has advantages in Web Service development. First,
   Apache lets you control security based on the verb using the 
   Limit 
   and LimitExcept
   directives, which
   let you restrict access controls based on the verb. Here is a sample 
   of one of my .htaccess files that restricts the use of 
   all verbs except GET to the CGI program Bulu.cgi.
&lt;Files Bulu.cgi&gt;
AuthType Basic
AuthName myrealm
AuthUserFile /path/to/my/password/file
  &lt;LimitExcept GET&gt;
  Require valid-user
  &lt;/LimitExcept&gt;
&lt;/Files&gt;

In addition, the Script
   directive can be used to dispatch to a CGI program based on the verb used:
Script PUT /cgi-bin/put.cgi
The second advantage using PUT brings is clarity. Given the idiom
   of using GET/PUT in tandem on a URI to edit resources PUT
   clearly signals what the interface is doing.
Resources
ApacheWeek: Publishing Pages with PUT
RestEchoApiPutAndDelete: Discussion on the use of PUT
   and DELETE in the AtomAPI.
mod_actions: An Apache module for 
  controlling dispatching based on verb or content-type.
Configuring your WWW server to understand the PUT method, from the W3Cs Amaya project documentation.
WebDAV is also something you may be interested in if you
   are looking for ways to publish your content using HTTP. WebDAV stands for 
   "Web-based Distributed Authoring and Versioning". It is a set of extensions to the HTTP 
  protocol which allows users to collaboratively edit and manage files on remote web servers. 
  
   Mod_dav in an Apache module that implements WebDAV.

">
  <meta name="twitter:card"  content="summary">
  <meta name="twitter:image" content="https://bitworking.org/images/newlogo.png">

  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1974123-1', 'auto');
  ga('send', 'pageview');

</script>
  

  
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
    
    
    <a class="site-title" href="/">
      <img src="https://bitworking.org/images/newlogo.png" >
      BitWorking
    </a>
  
    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
            <a class="page-link" href="/about/">About</a>
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
        </div>
      </nav>
    
  </div>
</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">The HTTP verb PUT under Apache Safe or Dangerous?</h1>
    <p class="post-meta">
      <a class="u-url" href="/news/2003/08/PUT_SaferOrDangerous">
        <time datetime="2003-08-23T00:00:00-04:00" itemprop="datePublished" class="dt-published">
          
          Aug 23, 2003
        </time>
      </a>
      â€¢ <a rel="author me" class="p-author h-card" href="/about"> <span itemprop="author"
          itemscope itemtype="http://schema.org/Person">
          <img class="u-photo" src="/images/joe2016.jpg" alt="" style="height: 16px; border-radius: 8px; margin-right: 4px;" />
          <span
            itemprop="name">Joe Gregorio</span></span></a>
      </p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
      <p>"Is the HTTP verb PUT under Apache safe or dangerous?" This is a question I come across often, and have now 
  run into it twice in the work on Atom. So is it safe? The answer is maybe.</p>
  <p>Here are two such examples:</p>
<blockquote><p>
  Using DELETE and PUT may be the "right thing to do" 
  in an ideal world, but the fact of the matter is that a 
  lot -- if not the vast majority -- of webservers do not allow these 
  operations. </p></blockquote>
<blockquote><p>If anyone knows of a newer article describing 
  HTTP PUT with apache, I would be very interested in seeing it. Because, 
  due to my experience with PUT, you have to define a single PUTScript in 
  httpd.conf, and if you PUT something to an apache server at the URI 
  www.example.com/blog/entries/1 or something similar, apache passes all 
  of the information to the PUTScript, not to anything else.</p></blockquote>
<p>Both of the above quotes are from the <a href="http://www.intertwingly.net/wiki/pie/RestEchoApiPutAndDelete">Atom Wiki discussion 
  of the use of PUT</a>. A little digging reveals that the ApacheWeek article 
  <a href="http://www.apacheweek.com/features/put">Publishing Pages with PUT</a> 
  is referenced most often when the danger of PUT is raised. </p><p>
</p><p>That ApacheWeek article does talk about the dangers of PUT and
  the cautions you need to follow when writing a script that
  does content publishing via PUT. That key part of that phrase
  is <strong>content publishing</strong>. That means that PUT is being 
  used to upload arbitrary content to the server and the client
  is determining via the URI where the content should be stored.
  Now you can imagine how this might be dangerous, for example
  not correctly checking URI paths that include <code>../..</code> could
  let a malicious agent re-write your <code>.bashrc</code>.</p>
<p>Implementing a PUT script can be difficult and a security hazard
   in the context of content publishing, but that's the case because
   the client is choosing the target URI and the client could upload
   any content type. In the case of Web Services in general, and
   the AtomAPI in particular, PUT is used in a much narrower manner
   and avoids those potential security problems.</p>
<p>In the case of the AtomAPI PUT is only allowed on URIs that point 
   to a pre-existing resource. The
   AtomAPI follows a general idiom for editing resources of doing 
   a GET to retrieve the original XML, then a PUT on the same URI
   to upate that resource with the edited XML. No URIs are created 
   by doing a PUT. PUT is not accepted on arbitrary URIs. This makes
   the use of PUT in the context of the AtomAPI just as safe as POST.</p>
<p>There are quite a few ways to configure Apache to process
   incoming requests. In particular it is possible to have a single
   script that handles all PUT requests below a chosen directory. This 
   strategy, and all of the associated security concerns associated with
   it, are covered fully in the <a href="http://www.apacheweek.com/features/put">Publishing Pages with PUT</a>.</p>
<p>When processing request with a CGI script all the PUT requests
   will come through. The verb is passed to the CGI program via the REQUEST_METHOD environment 
   variable, and the program decides what to do with the content.</p>
<p>Using PUT propoerly has advantages in Web Service development. First,
   Apache lets you control security based on the verb using the 
   <a href="http://httpd.apache.org/docs-2.0/mod/core.html#limit">Limit</a> 
   and <a href="http://httpd.apache.org/docs-2.0/mod/core.html#limitexcept">LimitExcept</a>
   directives, which
   let you restrict access controls based on the verb. Here is a sample 
   of one of my <code>.htaccess</code> files that restricts the use of 
   all verbs except GET to the CGI program <code>Bulu.cgi.</code></p>
<pre class="example"><code>&lt;Files Bulu.cgi&gt;
AuthType Basic
AuthName myrealm
AuthUserFile /path/to/my/password/file
  &lt;LimitExcept GET&gt;
  Require valid-user
  &lt;/LimitExcept&gt;
&lt;/Files&gt;
</code></pre>
<p>In addition, the <a href="http://httpd.apache.org/docs-2.0/mod/mod_actions.html#script">Script</a>
   directive can be used to dispatch to a CGI program based on the verb used:</p>
<pre class="example"><code>Script PUT /cgi-bin/put.cgi</code></pre>
<p>The second advantage using PUT brings is clarity. Given the idiom
   of using GET/PUT in tandem on a URI to edit resources PUT
   clearly signals what the interface is doing.</p>
<h4>Resources</h4>
<p><a href="http://www.apacheweek.com">ApacheWeek</a>: <a href="http://www.apacheweek.com/features/put">Publishing Pages with PUT</a></p>
<p><a href="http://www.intertwingly.net/wiki/pie/RestEchoApiPutAndDelete">RestEchoApiPutAndDelete</a>: Discussion on the use of PUT
   and DELETE in the AtomAPI.</p>
<p><a href="http://httpd.apache.org/docs-2.0/mod/mod_actions.html">mod_actions</a>: An Apache module for 
  controlling dispatching based on verb or content-type.</p>
<p><a href="http://www.w3.org/Amaya/User/Put.html">Configuring your WWW server to understand the PUT method</a>, from the W3Cs Amaya project documentation.</p>
<p><a href="http://www.webdav.org/">WebDAV</a> is also something you may be interested in if you
   are looking for ways to publish your content using HTTP. WebDAV stands for 
   "Web-based Distributed Authoring and Versioning". It is a set of extensions to the HTTP 
  protocol which allows users to collaboratively edit and manage files on remote web servers. 
  <a href="http://httpd.apache.org/docs-2.0/mod/mod_dav.html">
   Mod_dav</a> in an Apache module that implements WebDAV.</p>

  
  

  </div>

  <script type="text/javascript" charset="utf-8">
    fetch('/u/mentions').then(function(resp) {
      if (!resp.ok) {
        return
      }
      resp.text().then(function(text) {
        document.getElementById('mentions').innerHTML = text;
      });
    });
  </script>
  <div id=mentions>
  </div>

  
    

  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = 'https://bitworking.org/news/2003/08/PUT_SaferOrDangerous';
      this.page.identifier = 'https://bitworking.org/news/2003/08/PUT_SaferOrDangerous';
    };

    (function() {
      var d = document, s = d.createElement('script');

      s.src = 'https://bitworking-1.disqus.com/embed.js';

      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


  
</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    
    <div class="PageNavigation">
      
      <a class="prev" href="/news/2003/08/How_safe_is_that_verb_">&laquo;
        How safe is that verb?</a>
      
      
      <a class="next"
        href="/news/2003/08/New_AtomAPI_Implementation_Release2">New AtomAPI Implementation Release &raquo;</a>
      
    </div>
    

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>
            
              BitWorking
            
            </li>
            
            <li><a rel=me class="u-email" href="mailto:joe@bitworking.org">joe@bitworking.org</a></li>
            
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/jcgregorio" rel=me><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">jcgregorio</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/bitworking" rel=me><span class="icon icon--twitter"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">bitworking</span></a>

          </li>
          

          <li>
            <a href="https://plus.google.com/+JoeGregorio" rel=me>
              <svg enable-background="new 0 0 128 128" height="16px" viewBox="0 0 128 128" width="16px" xml:space="preserve">
                <circle cx="64" cy="64" fill="gray" r="64"/>
                <path d="M49.424,97.875c-19.018,0-34.491-15.193-34.491-33.874c0-18.68,15.473-33.875,34.491-33.875 c8.318,0,16.354,2.952,22.624,8.309l-8.771,9.899c-3.838-3.279-8.758-5.086-13.853-5.086c-11.652,0-21.13,9.31-21.13,20.752 c0,11.441,9.479,20.75,21.13,20.75c9.858,0,16.311-4.723,18.407-13.197H49.587V58.432h32.347v6.562 C81.934,84.659,68.869,97.875,49.424,97.875z"
                fill="#FFFFFF"/>
                <polygon fill="#FFFFFF" points="117.934,58.438
                107.934,58.438 107.934,48.438 99.934,48.438 99.934,58.438
                89.934,58.438     89.934,66.438 99.934,66.438 99.934,76.438
                107.934,76.438 107.934,66.438 117.934,66.438   "/>
              </svg>
              <span class="username">JoeGregorio</span></a>
          </li>
        </ul>
      </div>

      <div class="h-card footer-col footer-col-3">
        <p class="p-note">Joe Gregorio - REST, Web, Python, Go, APIs, Dad, Husband, Maker, or any linear combination of such. Googler.
</p>
        <a class="p-name u-url" href="https://bitworking.org" style="display: none"><img
          class="u-photo" src="/images/joe2016.jpg" alt="" />Joe Gregorio</a>
        <a rel=me class="u-email" href="mailto:joe@bitworking.org">joe@bitworking.org</a>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
