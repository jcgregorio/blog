---
layout: post
title: draft-gregorio-uritemplate-02.txt

---

  
  <p>I've submitted the next version of the URI Templating specification, draft-gregorio-uritemplate-02.txt, but it won't be officially published until Dec 3rd because of the upcoming IETF meeting. I've gone ahead and released the HTML and TXT versions of the draft and will update the pointer to the TXT version once it is published as an internet-draft. As usual, the draft can be found here:<br /><br /> <a href="http://bitworking.org/projects/URI-Templates/">http://bitworking.org/projects/URI-Templates/</a><br /><br />This version adds the '-cmd' commands we've been talking about, w/o the '-sub' command. I've also added an examples section and some example code in an Appendix to demonstrate how easy the parsing can be.<br /><br />I've also written a parser that extracts the example templates and variable definitions from the final .TXT version of the specification and runs them through the template-expansion code to check them against the supplied expansions. Finally, the URI Template explainer web service has been updated to conform to this draft. I'm actually running off of two different subversion repositories, one for the code, and another for the specification text. I'll be consolidating them into one repository in the future.</p>
  <div class="commentContent" id="X1">
    Hi Joe -- I think the link is missing a t in projects.  Thanks, Nell
    <p class="commentByLine">Posted by
       <a href="mailto:ngawor@gmail.com">Nell Gawor</a> on <a href="#X1" title="2007-11-26T09:29:25.718937">2007-11-26</a>
    </p>
</div><div class="commentContent" id="X2">
    You missed a 't' Joe!
    <p class="commentByLine">Posted by
       <a href="http://jamiethomson.spaces.live.com">JamieT</a> on <a href="#X2" title="2007-11-26T10:18:22.778286">2007-11-26</a>
    </p>
</div><div class="commentContent" id="X3">
    Nell and Jamie,<br />
<p>Thanks! Now fixed.</p>
    <p class="commentByLine">Posted by
       <a href="http://bitworking.org">Joe</a> on <a href="#X3" title="2007-11-26T11:48:21.040709">2007-11-26</a>
    </p>
</div><div class="commentContent" id="X4">
    Why did you choose to define URI templates instead of IRI templates?
    <p class="commentByLine">Posted by
       <a href="http://briansmith.org/">Brian</a> on <a href="#X4" title="2007-11-26T13:03:05.461530">2007-11-26</a>
    </p>
</div><div class="commentContent" id="X5">
    Brian,<br />
<p>There will probably be an IRI part of the specification.</p>
    <p class="commentByLine">Posted by
       <a href="http://bitworking.org">Joe</a> on <a href="#X5" title="2007-11-26T14:10:13.073315">2007-11-26</a>
    </p>
</div><div class="commentContent" id="X6">
    I think there is a security consideration in terms of injection attacks.  I don't *think* this consideration is a problem, but it could be noted, as I think it also drives some of the design considerations.  An injection attack would be something like ?foo={article_id}, where article_id="1&amp;action=delete" (with the value somehow submitted by an attacker).  This would be a problem *if* it expanded to ?foo=1&amp;action=delete.  But expanding to ?foo=1%26action%3Ddelete is generally safe.  Of course if there is any structure to the values beyond normal parameters, e.g., ?action=SELECT%20{table} and someone submits table="foo;DELETE bar", then you'll still be unsafe (assuming for some reason allowing destructive query parameters are "safe").  So that still might be a consideration.  Changing your URI to ?action=SELECT&amp;table={table} would make it safer.<br /><br />

Hmm... now that I look at it, it appears that percent quoting happens to values, not during substitution itself.  This leaves these security concerns in place, depending on who you trust and where the values come from.  But I'm really a bit confused by that, since an example include a value of \u2654\u2655 but under 3.1 Variables it appears that you say all values must be encoded?
    <p class="commentByLine">Posted by
       <a href="http://blog.ianbicking.org">Ian Bicking</a> on <a href="#X6" title="2007-11-26T16:35:50.318239">2007-11-26</a>
    </p>
</div><div class="commentContent" id="X7">
    That all operations take exactly three arguments (op|arg|vars) is a little weird to me.  *or*, I'd say that it should be op|vars|arg, where arg often has a default (e.g., -join gets &amp;)
<br /><br />
I have a hard time following the examples.  More realistic examples would help, I think, or including the values alongside the example so it doesn't require as much scrolling about to decipher.
<br /><br />

Would it be useful if {-join|&amp;|list_var} did list_var=value1&amp;list_var=value2 (for list_var = ['value1', 'value2'])?  I think it would.
<br /><br />

The use of variable names as query string names in -join violates "Forcing people to use a well-known query parameter isn't good practice", as variable names and the variables in a query string become bound to each other.
    <p class="commentByLine">Posted by
       <a href="http://blog.ianbicking.org">Ian Bicking</a> on <a href="#X7" title="2007-11-26T16:44:10.112927">2007-11-26</a>
    </p>
</div><div class="commentContent" id="X8">
    Ian,<br />
<p>Thanks for the feedback, would you mind forwarding it
  to the W3C URI mailing list? (http://lists.w3.org/Archives/Public/uri/).
</p>
    <p class="commentByLine">Posted by
       <a href="http://bitworking.org">Joe</a> on <a href="#X8" title="2007-11-26T19:11:47.784515">2007-11-26</a>
    </p>
</div>
  
