<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><title>The Atom Publishing Protocol</title><style type="text/css" title="Xml2Rfc (sans serif)">
a {
  text-decoration: none;
}
a:hover {
  text-decoration: underline;
}
a:active {
  text-decoration: underline;
}
address {
  margin-top: 1em;
  margin-left: 2em;
  font-style: normal;
}
body {
  
  color: #000000;
  font-family: verdana, helvetica, arial, sans-serif;
  font-size: 10pt;
}
dl {
  margin-left: 2em;
}
h1 {
  color: #333333;
  font-size: 14pt;
  line-height: 21pt;
  page-break-after: avoid;
}
h1.np {
  page-break-before: always;
}
h1 a {
  color: #333333;
}
h2 {
  color: #000000;
  font-size: 12pt;
  line-height: 15pt;
  page-break-after: avoid;
}
h2 a {
  color: #000000;
}
h3 {
  color: #000000;
  font-size: 10pt;
  page-break-after: avoid;
}
h3 a {
  color: #000000;
}
h4 {
  color: #000000;
  font-size: 10pt;
  page-break-after: avoid;
}
h4 a {
  color: #000000;
}
h5 {
  color: #000000;
  font-size: 10pt;
  page-break-after: avoid;
}
h5 a {
  color: #000000;
}
img {
  margin-left: 3em;
}
li {
  margin-left: 2em;
  margin-right: 2em;
}
ol {
  margin-left: 2em;
  margin-right: 2em;
}
p {
  margin-left: 2em;
  margin-right: 2em;
}
pre {
  margin-left: 3em;
  background-color: lightyellow;
}
table {
  margin-left: 2em;
}
table.header {
  width: 95%;
  font-size: 10pt;
  color: white;
}
td.top {
  vertical-align: top;
}
td.topnowrap {
  vertical-align: top;
  white-space: nowrap; 
}
td.right {
  text-align: right;
}
td.header-l {
  background-color: gray;
  width: 50%;
}
td.header-r {
  background-color: gray;
  width: 50%;
  text-align: right;
}
thead {
  display:table-header-group;
}
ul.toc {
  list-style: none;
  margin-left: 1.5em;
  margin-right: 0em;
  padding-left: 0em;
}
li.tocline0 {
  line-height: 150%;
  font-weight: bold;
  font-size: 10pt;
  margin-left: 0em;
  margin-right: 0em;
}
li.tocline1 {
  line-height: normal;
  font-weight: normal;
  font-size: 9pt;
  margin-left: 0em;
  margin-right: 0em;
}
li.tocline2 {
  font-size: 0pt;
}
ul.ind {
  list-style: none;
  margin-left: 1.5em;
  margin-right: 0em;
  padding-left: 0em;
}
li.indline0 {
  font-weight: bold;
  line-height: 200%;
  margin-left: 0em;
  margin-right: 0em;
}
li.indline1 {
  font-weight: normal;
  line-height: 150%;
  margin-left: 0em;
  margin-right: 0em;
}
.comment {
  background-color: yellow;
}
.editingmark {
  background-color: khaki;
}
.error {
  font-size: 14pt;
  background-color: red;
}
.toowide {
  color: red;
  font-weight: bold;
}
.title {
  color: #990000;
  font-size: 18pt;
  line-height: 18pt;
  font-weight: bold;
  text-align: center;
}
.figure {
  font-weight: bold;
  text-align: center;
  font-size: 9pt;
}
.filename {
  color: #333333;
  font-weight: bold;
  font-size: 12pt;
  line-height: 21pt;
  text-align: center;
}
.warning {
  font-size: 14pt;
  background-color: yellow;
}
del {
  color: red;
  text-decoration: line-through;
}
.del {
  color: red;
  text-decoration: line-through;
}
.fn {
  font-weight: bold;
}
ins {
  color: green;
  text-decoration: underline;
}
.ins {
  color: green;
  text-decoration: underline;
}
.pn {
  position: absolute;
  color: white;
}
.pn:hover {
  color: #C8A8FF;
}
.vcardline {
  display: block;
}

table.openissue {
  background-color: khaki;
  border-width: thin;
  border-style: solid;
  border-color: black;
}

table.closedissue {
  background-color: white;
  border-width: thin;
  border-style: solid;
  border-color: gray;
  color: gray; 
}

.closed-issue {
  border: solid;
  border-width: thin;
  background-color: lime;
  font-size: smaller;
  font-weight: bold;
}

.open-issue {
  border: solid;
  border-width: thin;
  background-color: red;
  font-size: smaller;
  font-weight: bold;
}

.editor-issue {
  border: solid;
  border-width: thin;
  background-color: yellow;
  font-size: smaller;
  font-weight: bold;
}

@media print {
  .noprint {
    display: none;
  }
  
  table.header {
    width: 90%;
  }

  td.header-l {
    width: 50%;
    color: black;
    background-color: white;
    vertical-align: top;
    font-size: 10pt;
  }

  td.header-r {
    width: 33%;
    color: black;
    background-color: white;
    vertical-align: top;
    text-align: right;
    font-size: 10pt;
  }

  ul.toc a::after {
    content: leader('.') target-counter(attr(href), page);
  }
  
  a.iref {
    content: target-counter(attr(href), page);
  }
}

@page {
  @top-left {
       content: "INTERNET DRAFT"; 
  } 
  @top-right {
       content: "October 2006"; 
  } 
  @top-center {
       content: "The Atom Publishing Protocol"; 
  } 
  @bottom-left {
       content: "Gregorio & de hOra"; 
  } 
  @bottom-center {
       content: "Standards Track"; 
  } 
  @bottom-right {
       content: "[Page " counter(page) "]"; 
  } 
}

@page:first { 
    @top-left {
      content: normal;
    }
    @top-right {
      content: normal;
    }
    @top-center {
      content: normal;
    }
}
</style><link rel="Contents" href="#rfc.toc"><link rel="Author" href="#rfc.authors"><link rel="Copyright" href="#rfc.copyright"><link rel="Chapter" title="1 Introduction" href="#rfc.section.1"><link rel="Chapter" title="2 Notational Conventions" href="#rfc.section.2"><link rel="Chapter" title="3 Terminology" href="#rfc.section.3"><link rel="Chapter" title="4 Protocol Model" href="#rfc.section.4"><link rel="Chapter" title="5 Protocol Operations" href="#rfc.section.5"><link rel="Chapter" title="6 Atom Publishing Protocol Documents" href="#rfc.section.6"><link rel="Chapter" title="7 Category Documents" href="#rfc.section.7"><link rel="Chapter" title="8 Service Documents" href="#rfc.section.8"><link rel="Chapter" title="9 Creating and Editing Resources" href="#rfc.section.9"><link rel="Chapter" title="10 Listing Collections" href="#rfc.section.10"><link rel="Chapter" title="11 Atom Format Link Relation Extensions" href="#rfc.section.11"><link rel="Chapter" title="12 Atom Publishing Controls" href="#rfc.section.12"><link rel="Chapter" title="13 Securing the Atom Publishing Protocol" href="#rfc.section.13"><link rel="Chapter" title="14 Security Considerations" href="#rfc.section.14"><link rel="Chapter" title="15 IANA Considerations" href="#rfc.section.15"><link rel="Chapter" href="#rfc.section.16" title="16 References"><link rel="Appendix" title="A Contributors" href="#rfc.section.A"><link rel="Appendix" title="B RELAX NG Compact Schema" href="#rfc.section.B"><link rel="Appendix" title="C Revision History" href="#rfc.section.C"><meta name="generator" content="http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.220, 2005/04/11 11:37:53, XSLT vendor: libxslt http://xmlsoft.org/XSLT/"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.Creator" content="Gregorio, J.C."><meta name="DC.Creator" content="de hOra, B."><meta name="DC.Identifier" content="urn:ietf:id:draft-ietf-atompub-protocol-11.txt"><meta name="DC.Date.Issued" scheme="ISO8601" content="2006-10"><meta name="DC.Description.Abstract" content="The Atom Publishing Protocol (APP) is an application-level protocol for publishing and editing Web resources. The protocol is based on HTTP transport of Atom-formatted representations. The Atom format is documented in the Atom Syndication Format [RFC4287]."></head><body><table summary="header information" class="header" border="0" cellpadding="1" cellspacing="1"><tr><td class="header-l">Network Working Group </td><td class="header-r">J.C. Gregorio, Editor </td></tr><tr><td class="header-l">INTERNET DRAFT </td><td class="header-r">IBM </td></tr><tr><td class="header-l">
        &lt;draft-ietf-atompub-protocol-11.txt&gt;
       </td><td class="header-r">B. de hOra, Editor </td></tr><tr><td class="header-l">Category: Standards Track </td><td class="header-r">Propylon Ltd. </td></tr><tr><td class="header-l">Expires: April 2007 </td><td class="header-r">October 2006 </td></tr></table><p class="title"><br>The Atom Publishing Protocol<br><span class="filename">draft-ietf-atompub-protocol-11.txt</span></p><h1><a name="rfc.status" href="#rfc.status">Status of this Memo</a></h1><p>By submitting this Internet-Draft, each author represents that any applicable patent or other IPR claims of which he or she is aware have been or will be disclosed, and any of which he or she becomes aware will be disclosed, in accordance with Section 6 of BCP 79.</p><p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF), its areas, and its working groups. Note that other groups may also distribute working documents as Internet-Drafts.</p><p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time. It is inappropriate to use Internet-Drafts as reference material or to cite them other than as &#8220;work in progress&#8221;.</p><p>The list of current Internet-Drafts can be accessed at &lt;<a href="http://www.ietf.org/ietf/1id-abstracts.txt">http://www.ietf.org/ietf/1id-abstracts.txt</a>&gt;.</p><p>The list of Internet-Draft Shadow Directories can be accessed at &lt;<a href="http://www.ietf.org/shadow.html">http://www.ietf.org/shadow.html</a>&gt;.</p><p>This Internet-Draft will expire in April 2007.</p><h1><a name="rfc.copyrightnotice" href="#rfc.copyrightnotice">Copyright Notice</a></h1><p>Copyright © The Internet Society (2006). All Rights Reserved.</p><h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1> <p>The Atom Publishing Protocol (APP) is an application-level protocol for publishing and editing Web resources. The protocol is based on HTTP transport of Atom-formatted representations. The Atom format is documented in the Atom Syndication Format [RFC4287].</p> <h1 id="rfc.note.1"><a href="#rfc.note.1"></a>Editorial Note</h1> <p>To provide feedback on this Internet-Draft, join the <a href="http://www.imc.org/atom-protocol/index.html">atom-protocol mailing list (http://www.imc.org/atom-protocol/index.html)</a>.</p> <hr class="noprint"><h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1><ul class="toc"><li class="tocline0">1.   <a href="#rfc.section.1">Introduction</a></li><li class="tocline0">2.   <a href="#rfc.section.2">Notational Conventions</a><ul class="toc"><li class="tocline1">2.1   <a href="#xml-conv">XML-related Conventions</a><ul class="toc"><li class="tocline1">2.1.1   <a href="#i-items">Referring to Information Items</a></li><li class="tocline1">2.1.2   <a href="#rfc.section.2.1.2">RELAX NG Schema</a></li><li class="tocline1">2.1.3   <a href="#baselang">Use of xml:base and xml:lang</a></li></ul></li></ul></li><li class="tocline0">3.   <a href="#terminology">Terminology</a></li><li class="tocline0">4.   <a href="#model">Protocol Model</a></li><li class="tocline0">5.   <a href="#operation">Protocol Operations</a><ul class="toc"><li class="tocline1">5.1   <a href="#find-collections">Retrieving a Service Document</a></li><li class="tocline1">5.2   <a href="#listing">Listing Collection Members</a></li><li class="tocline1">5.3   <a href="#post-to-create">Creating a Resource</a></li><li class="tocline1">5.4   <a href="#edit">Editing a Resource</a><ul class="toc"><li class="tocline1">5.4.1   <a href="#rfc.section.5.4.1">Retrieving a Resource</a></li><li class="tocline1">5.4.2   <a href="#rfc.section.5.4.2">Updating a Resource</a></li><li class="tocline1">5.4.3   <a href="#rfc.section.5.4.3">Deleting a Resource</a></li></ul></li><li class="tocline1">5.5   <a href="#rfc.section.5.5">Use of HTTP Response codes</a></li></ul></li><li class="tocline0">6.   <a href="#xmlns">Atom Publishing Protocol Documents</a><ul class="toc"><li class="tocline1">6.1   <a href="#appcatsext">Document Types</a></li><li class="tocline1">6.2   <a href="#appcatsex">Document Extensibility</a></li></ul></li><li class="tocline0">7.   <a href="#catdocs">Category Documents</a><ul class="toc"><li class="tocline1">7.1   <a href="#catdocseg">Example</a></li><li class="tocline1">7.2   <a href="#catdocselemdef">Element Definitions</a><ul class="toc"><li class="tocline1">7.2.1   <a href="#appcats">The "app:categories" element</a><ul class="toc"><li class="tocline2"></ul></li></ul></li></ul></li><li class="tocline0">8.   <a href="#appdocs">Service Documents</a><ul class="toc"><li class="tocline1">8.1   <a href="#appdocs_example">Example</a></li><li class="tocline1">8.2   <a href="#service_document_elements">Element Definitions</a><ul class="toc"><li class="tocline1">8.2.1   <a href="#rfc.section.8.2.1">The "app:service" Element</a></li><li class="tocline1">8.2.2   <a href="#rfc.section.8.2.2">The "app:workspace" Element</a><ul class="toc"><li class="tocline2"></ul></li><li class="tocline1">8.2.3   <a href="#rfc.section.8.2.3">The "app:collection" Element</a><ul class="toc"><li class="tocline2"><li class="tocline2"><li class="tocline2"></ul></li><li class="tocline1">8.2.4   <a href="#accept">The "app:accept" Element</a></li><li class="tocline1">8.2.5   <a href="#categories-elem">The "app:categories" Element</a></li></ul></li></ul></li><li class="tocline0">9.   <a href="#collection_resource">Creating and Editing Resources</a><ul class="toc"><li class="tocline1">9.1   <a href="#memuri">Member URIs</a></li><li class="tocline1">9.2   <a href="#rfc.section.9.2">Creating resources with POST</a><ul class="toc"><li class="tocline1">9.2.1   <a href="#create-example">Example</a></li></ul></li><li class="tocline1">9.3   <a href="#update-via-PUT">Updating Resources with PUT</a></li><li class="tocline1">9.4   <a href="#update-via-DELETE">Deleting Resources with DELETE</a></li><li class="tocline1">9.5   <a href="#media-link-entries">Media Resources and Media Link Entries</a></li><li class="tocline1">9.6   <a href="#rfc.section.9.6">The Slug: Header</a><ul class="toc"><li class="tocline1">9.6.1   <a href="#rfc.section.9.6.1">Slug: Header syntax</a></li><li class="tocline1">9.6.2   <a href="#title-header-example">Examples</a></li></ul></li></ul></li><li class="tocline0">10.   <a href="#templates">Listing Collections</a><ul class="toc"><li class="tocline1">10.1   <a href="#rfc.section.10.1">Collection Paging</a></li><li class="tocline1">10.2   <a href="#rfc.section.10.2">The "app:edited" Element</a></li></ul></li><li class="tocline0">11.   <a href="#atom-entry-extensions">Atom Format Link Relation Extensions</a><ul class="toc"><li class="tocline1">11.1   <a href="#new-link-relation">The "edit" Link Relation</a></li><li class="tocline1">11.2   <a href="#new-media-link-relation">The "edit-media" Link Relation</a></li></ul></li><li class="tocline0">12.   <a href="#pub-control">Atom Publishing Controls</a><ul class="toc"><li class="tocline1">12.1   <a href="#rfc.section.12.1">The "app:control" Element</a><ul class="toc"><li class="tocline1">12.1.1   <a href="#rfc.section.12.1.1">The "app:draft" Element</a></li></ul></li></ul></li><li class="tocline0">13.   <a href="#rfc.section.13">Securing the Atom Publishing Protocol</a></li><li class="tocline0">14.   <a href="#rfc.section.14">Security Considerations</a><ul class="toc"><li class="tocline1">14.1   <a href="#rfc.section.14.1">Denial of Service</a></li><li class="tocline1">14.2   <a href="#rfc.section.14.2">Replay Attacks</a></li><li class="tocline1">14.3   <a href="#rfc.section.14.3">Spoofing Attacks</a></li><li class="tocline1">14.4   <a href="#rfc.section.14.4">Linked Resources</a></li><li class="tocline1">14.5   <a href="#rfc.section.14.5">Digital Signatures and Encryption</a></li><li class="tocline1">14.6   <a href="#rfc.section.14.6">URIs and IRIs</a></li></ul></li><li class="tocline0">15.   <a href="#iana">IANA Considerations</a><ul class="toc"><li class="tocline1">15.1   <a href="#iana-atomserv">Content-type registration for 'application/atomserv+xml'</a></li><li class="tocline1">15.2   <a href="#iana-atomcat">Content-type registration for 'application/atomcat+xml'</a></li><li class="tocline1">15.3   <a href="#iana-slug">Header field registration for 'SLUG'</a></li></ul></li><li class="tocline0">16.   <a href="#rfc.references">References</a><ul class="toc"><li class="tocline1">16.1   <a href="#rfc.references.1">Normative References</a></li><li class="tocline1">16.2   <a href="#rfc.references.2">Informative References</a></li></ul></li><li class="tocline0"><a href="#rfc.authors">Authors' Addresses</a></li><li class="tocline0">A.   <a href="#rfc.section.A">Contributors</a></li><li class="tocline0">B.   <a href="#schema">RELAX NG Compact Schema</a></li><li class="tocline0">C.   <a href="#rfc.section.C">Revision History</a></li><li class="tocline0"><a href="#rfc.ipr">Intellectual Property and Copyright Statements</a></li></ul><hr class="noprint"><h1 id="rfc.section.1" class="np"><a href="#rfc.section.1">1.</a> Introduction</h1><p id="rfc.section.1.p.1">The Atom Publishing Protocol is an application-level protocol for publishing and editing Web resources using HTTP <a href="#RFC2616" title="Hypertext Transfer Protocol -- HTTP/1.1">[RFC2616]</a> and XML 1.0 <a href="#W3C.REC-xml-20060816" title="Extensible Markup Language (XML) 1.0 (Fourth Edition)">[W3C.REC-xml-20060816]</a>. The protocol supports the creation of arbitrary web resources and provides facilities for:</p><p id="rfc.section.1.p.2"> </p><ul><li>Collections: Sets of resources, which can be retrieved in whole or in part.</li><li>Service: Discovering and describing Collections.</li><li>Editing: Creating, updating and deleting resources.</li></ul><hr class="noprint"><h1 id="rfc.section.2" class="np"><a href="#rfc.section.2">2.</a> Notational Conventions</h1><p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a>.</p><h2 id="rfc.section.2.1"><a href="#rfc.section.2.1">2.1</a> <a name="xml-conv" href="#xml-conv">XML-related Conventions</a></h2><h3 id="rfc.section.2.1.1"><a href="#rfc.section.2.1.1">2.1.1</a> <a name="i-items" href="#i-items">Referring to Information Items</a></h3><p id="rfc.section.2.1.1.p.1">Atom Protocol Document formats are specified in terms of the XML Information Set <a href="#W3C.REC-xml-infoset-20040204" title="XML Information Set (Second Edition)">[W3C.REC-xml-infoset-20040204]</a>, serialized as XML 1.0 <a href="#W3C.REC-xml-20060816" title="Extensible Markup Language (XML) 1.0 (Fourth Edition)">[W3C.REC-xml-20060816]</a>.</p><p id="rfc.section.2.1.1.p.2">The Infoset terms "Element Information Item" and "Attribute Information Item" are shortened to "element" and "attribute" respectively. Therefore, when this specification uses the term "element", it is referring to an Element Information Item, and when it uses the term "attribute", it is referring to an Attribute Information Item.</p><h3 id="rfc.section.2.1.2"><a href="#rfc.section.2.1.2">2.1.2</a> RELAX NG Schema</h3><p id="rfc.section.2.1.2.p.1">Some sections of this specification are illustrated with fragments of a non-normative RELAX NG Compact schema <a href="#RNC" title="RELAX NG Compact Syntax">[RNC]</a>. However, the text of this specification provides the definition of conformance. Complete schemas appear in <a href="#schema" title="RELAX NG Compact Schema">Appendix B</a>.</p><h3 id="rfc.section.2.1.3"><a href="#rfc.section.2.1.3">2.1.3</a> <a name="baselang" href="#baselang">Use of xml:base and xml:lang</a></h3><p id="rfc.section.2.1.3.p.1">XML elements defined by this specification MAY have an xml:base attribute <a href="#W3C.REC-xmlbase-20010627" title="XML Base">[W3C.REC-xmlbase-20010627]</a>. When xml:base is used, it serves the function described in Section 5.1.1 of URI Generic Syntax <a href="#RFC3986" title="Uniform Resource Identifier (URI): Generic Syntax">[RFC3986]</a>, by establishing the base URI (or IRI) for resolving relative references found within the scope of the xml:base attribute.</p><p id="rfc.section.2.1.3.p.2">Any element defined by this specification MAY have an xml:lang attribute, whose content indicates the natural language for the element and its descendents. The language context is only significant for elements and attributes declared to be "Language-Sensitive" by this specification. Requirements regarding the content and interpretation of xml:lang are specified in Section 2.12 of XML 1.0 <a href="#W3C.REC-xml-20060816" title="Extensible Markup Language (XML) 1.0 (Fourth Edition)">[W3C.REC-xml-20060816]</a>.</p><hr class="noprint"><h1 id="rfc.section.3" class="np"><a href="#rfc.section.3">3.</a> <a name="terminology" href="#terminology">Terminology</a></h1><p id="rfc.section.3.p.1">For convenience, this protocol can be referred to as the "Atom Protocol" or "APP".</p><p id="rfc.section.3.p.2">URI/IRI - A Uniform Resource Identifier and Internationalized Resource Identifier. These terms and the distinction between them are defined in <a href="#RFC3986" title="Uniform Resource Identifier (URI): Generic Syntax">[RFC3986]</a> and <a href="#RFC3987" title="Internationalized Resource Identifiers (IRIs)">[RFC3987]</a>. Before an IRI found in a document is used by HTTP, the IRI is first converted to a URI (see <a href="#model" title="Protocol Model">Section 4</a> </p><p id="rfc.section.3.p.3">The phrase "the URI of a document" in this specification is shorthand for "a URI which, when dereferenced, is expected to produce that document as a representation".</p><p id="rfc.section.3.p.4">Resource - A network-accessible data object or service identified by an IRI, as defined in <a href="#RFC2616" title="Hypertext Transfer Protocol -- HTTP/1.1">[RFC2616]</a>. See <a href="#W3C.REC-webarch-20041215" title="Architecture of the World Wide Web, Volume One">[W3C.REC-webarch-20041215]</a> for further discussion on resources.</p><p id="rfc.section.3.p.5">Representation - An entity included with a request or response as defined in <a href="#RFC2616" title="Hypertext Transfer Protocol -- HTTP/1.1">[RFC2616]</a>.</p><p id="rfc.section.3.p.6">Collection - A resource that contains a set of Member Entries. See <a href="#collection_resource" title="Creating and Editing Resources">Section 9</a>.</p><p id="rfc.section.3.p.7">Member - A resource whose IRI is listed in a Collection by a link element with a relation of "edit" or "edit-media". See <a href="#memuri" title="Member URIs">Section 9.1</a>.</p><p id="rfc.section.3.p.8">Workspace - A group of collections. See <a href="#appdocs" title="Service Documents">Section 8</a>.</p><p id="rfc.section.3.p.9">Service Document - A document that describes the location and capabilities of one or more Collections. See <a href="#appdocs" title="Service Documents">Section 8</a>.</p><p id="rfc.section.3.p.10">Category Document - A document that describes the categories allowed in a Collection. See <a href="#catdocs" title="Category Documents">Section 7</a>.</p><hr class="noprint"><h1 id="rfc.section.4" class="np"><a href="#rfc.section.4">4.</a> <a name="model" href="#model">Protocol Model</a></h1><p id="rfc.section.4.p.1">The Atom Publishing Protocol uses HTTP methods to author Member Resources as follows:</p><p id="rfc.section.4.p.2"> </p><ul><li>GET is used to retrieve a representation of a known resource.</li><li>POST is used to create a new, dynamically-named, resource.</li><li>PUT is used to update a known resource.</li><li>DELETE is used to remove a known resource.</li></ul><p id="rfc.section.4.p.3">Along with operations on Member Resources the Atom Protocol defines Collection resources for managing and organizing Member Resources. Collections are represented by Atom Feed documents and contain the IRIs of, and metadata about, their Member Resources.</p><p id="rfc.section.4.p.4">Atom Protocol documents allow the use of IRIs <a href="#RFC3987" title="Internationalized Resource Identifiers (IRIs)">[RFC3987]</a>, as well as URIs <a href="#RFC3986" title="Uniform Resource Identifier (URI): Generic Syntax">[RFC3986]</a>. Before an IRI found in a document is used by HTTP, the IRI is first converted to a URI according the procedure defined in Section 3.1 of <a href="#RFC3987" title="Internationalized Resource Identifiers (IRIs)">[RFC3987]</a>. The resource identified by the URI after conversion is the same as the one identified by the IRI.</p><p id="rfc.section.4.p.5">There are two kinds of Member Resources - Member Entry Resources and Media Resources. Member Entry Resources are represented as Atom Entries <a href="#RFC4287" title="The Atom Syndication Format">[RFC4287]</a>. Media Resources can have representations in any media type. A Media Link Entry is a Member Entry that contains metadata about a Media Resource. This diagram shows the classification of the resources:</p><div id="rfc.figure.u.1"></div> <pre>
  Member Resource
      -&gt; Member Entry Resource
           -&gt; Media Link Entry Resource
      -&gt; Media Resource
</pre> <p id="rfc.section.4.p.7">Collections, represented by Atom feeds, contain entries. Those entries contain the Member Entry and Media Resources IRIs of the Collection. A Collection can contain any number of entries of either kind. In the diagram of a Collection below there are two entries. The first contains the IRI of a Member Entry Resource. The second contains the IRIs of both a Media Resource and a Media Link Entry Resource, which contains the metadata for that Media Resource:</p><div id="rfc.figure.u.2"></div> <pre>
  Collection
     Entry
        Member Entry IRI    -&gt;   Member Entry Resource

     Entry
        Member Entry IRI    -&gt;   Media Link Entry Resource
        Media IRI           -&gt;   Media Resource

</pre> <p id="rfc.section.4.p.9">Service Documents represent server-defined groups of Collections, and are used to initialize the process of creating and editing resources.</p><hr class="noprint"><h1 id="rfc.section.5" class="np"><a href="#rfc.section.5">5.</a> <a name="operation" href="#operation">Protocol Operations</a></h1><h2 id="rfc.section.5.1"><a href="#rfc.section.5.1">5.1</a> <a name="find-collections" href="#find-collections">Retrieving a Service Document</a></h2><div id="rfc.figure.u.3"></div> <pre>
Client                                     Server
  |                                           |
  |  1.) GET to Service Document              |
  |------------------------------------------&gt;|
  |                                           |
  |  2.) Service Document                     |
  |&lt;------------------------------------------|
  |                                           |
</pre> <p id="rfc.section.5.1.p.2"> </p><ol><li>The client sends a GET request using the URI of the Service Document.</li><li>The server responds with the document enumerating the IRIs of a set of Collections and the capabilities of those Collections supported by the server. The content of this document can vary based on aspects of the client request, including, but not limited to, authentication credentials.</li></ol><h2 id="rfc.section.5.2"><a href="#rfc.section.5.2">5.2</a> <a name="listing" href="#listing">Listing Collection Members</a></h2><p id="rfc.section.5.2.p.1">To list the members of a Collection, the client sends a GET request to the URI of a Collection. An Atom Feed Document is returned containing one Atom Entry for each Member Entry Resource. See <a href="#templates" title="Listing Collections">Section 10</a> and <a href="#atom-entry-extensions" title="Atom Format Link Relation Extensions">Section 11</a> for a description of the feed contents.</p><div id="rfc.figure.u.4"></div> <pre>
Client                          Server
  |                                |
  |  1.) GET to Collection URI     |
  |-------------------------------&gt;|
  |                                |
  |  2.) 200 OK, Atom Feed Doc     |
  |&lt;-------------------------------|
  |                                |
          </pre> <p id="rfc.section.5.2.p.3"> </p><ol><li>The client sends a GET request to the URI of the Collection.</li><li>The server responds with an Atom Feed Document containing the IRIs of the Collection members.</li></ol><h2 id="rfc.section.5.3"><a href="#rfc.section.5.3">5.3</a> <a name="post-to-create" href="#post-to-create">Creating a Resource</a></h2><div id="rfc.figure.u.5"></div> <pre>
Client                                     Server
  |                                           |
  |  1.) POST to URI of Collection            |
  |------------------------------------------&gt;|
  |                                           |
  |  2.) 201 Created                          |
  |      Location: Member Entry URI           |
  |&lt;------------------------------------------|
  |                                           |
</pre> <p id="rfc.section.5.3.p.2"> </p><ol><li>The client POSTs a representation of the Member to the URI of the Collection.</li><li>If the Member Resource was created successfully, the server responds with a status code of 201 and a Location: header that contains the IRI of the newly created Member Entry Resource. Media Resources may have also been created and their IRIs can be found through the Member Entry Resource. See <a href="#media-link-entries" title="Media Resources and Media Link Entries">Section 9.5</a> for more details.</li></ol><h2 id="rfc.section.5.4"><a href="#rfc.section.5.4">5.4</a> <a name="edit" href="#edit">Editing a Resource</a></h2><p id="rfc.section.5.4.p.1">Once a resource has been created and its Member URI is known, that URI can be used to retrieve, update, and delete the resource.</p><h3 id="rfc.section.5.4.1"><a href="#rfc.section.5.4.1">5.4.1</a> Retrieving a Resource</h3><div id="rfc.figure.u.6"></div> <pre>
Client                                     Server
  |                                           |
  |  1.) GET to Member URI                    |
  |------------------------------------------&gt;|
  |                                           |
  |  2.) Member Representation                |
  |&lt;------------------------------------------|
  |                                           |
</pre> <p id="rfc.section.5.4.1.p.2"> </p><ol><li>The client sends a GET request to the URI of a Member Resource to retrieve its representation.</li><li>The server responds with the representation of the resource.</li></ol><h3 id="rfc.section.5.4.2"><a href="#rfc.section.5.4.2">5.4.2</a> Updating a Resource</h3><div id="rfc.figure.u.7"></div> <pre>
Client                                     Server
  |                                           |
  |  1.) PUT to Member URI                    |
  |------------------------------------------&gt;|
  |                                           |
  |  2.) 200 OK                               |
  |&lt;------------------------------------------|
</pre> <p id="rfc.section.5.4.2.p.2"> </p><ol><li>The client PUTs an updated representation to the URI of a Member Resource.</li><li>Upon a successful update of the resource the server responds with a status code of 200.</li></ol><h3 id="rfc.section.5.4.3"><a href="#rfc.section.5.4.3">5.4.3</a> Deleting a Resource</h3><div id="rfc.figure.u.8"></div> <pre>
Client                                     Server
  |                                           |
  |  1.) DELETE to Member URI                 |
  |------------------------------------------&gt;|
  |                                           |
  |  2.) 200 Ok                               |
  |&lt;------------------------------------------|
  |                                           |
</pre> <p id="rfc.section.5.4.3.p.2"> </p><ol><li>The client sends a DELETE request to the URI of a Member Resource.</li><li>Upon the successful deletion of the resource the server responds with a status code of 200.</li></ol><p> A different approach is taken for deleting Media Resources, see <a href="#media-link-entries" title="Media Resources and Media Link Entries">Section 9.5</a> for details.</p><h2 id="rfc.section.5.5"><a href="#rfc.section.5.5">5.5</a> Use of HTTP Response codes</h2><p id="rfc.section.5.5.p.1">The Atom Protocol uses the response status codes defined in HTTP to indicate the success or failure of an operation. Consult the HTTP specification <a href="#RFC2616" title="Hypertext Transfer Protocol -- HTTP/1.1">[RFC2616]</a> for detailed definitions of each status code. Implementers are asked to note that per the HTTP specification, HTTP 4xx and 5xx response entities SHOULD include a human-readable explanation of the error.</p><hr class="noprint"><h1 id="rfc.section.6" class="np"><a href="#rfc.section.6">6.</a> <a name="xmlns" href="#xmlns">Atom Publishing Protocol Documents</a></h1><h2 id="rfc.section.6.1"><a href="#rfc.section.6.1">6.1</a> <a name="appcatsext" href="#appcatsext">Document Types</a></h2><p id="rfc.section.6.1.p.1">This specification describes two kinds of Documents - Category Documents and Service Documents.</p><p id="rfc.section.6.1.p.2">A Category Document (<a href="#catdocs" title="Category Documents">Section 7</a>) contain lists of categories specified using the "atom:category" element from the Atom Syndication Format. A Service Document (<a href="#appdocs" title="Service Documents">Section 8</a>) describes capabilities of workspaces, which are server-defined groupings of Collections.</p><p id="rfc.section.6.1.p.3">The namespace name <a href="#W3C.REC-xml-names-20060816" title="Namespaces in XML">[W3C.REC-xml-names-20060816]</a> for either kind of document is:</p><div id="rfc.figure.u.9"></div> <pre>    http://purl.org/atom/app#</pre> <p id="rfc.section.6.1.p.5"> <span class="comment">[rfc.comment.1: Needs to be updated with the final URI upon publication]</span> </p><p id="rfc.section.6.1.p.6">This specification uses the prefix "app:" for the namespace name. The prefix "atom:" is used for "http://www.w3.org/2005/Atom", the namespace name of the Atom Syndication Format <a href="#RFC4287" title="The Atom Syndication Format">[RFC4287]</a>. The namespace prefixes are not semantically significant.</p><p id="rfc.section.6.1.p.7">Atom Publishing Protocol Documents MUST be well-formed XML. This specification does not define any DTDs for Atom Protocol formats, and hence does not require them to be "valid" in the sense used by XML.</p><h2 id="rfc.section.6.2"><a href="#rfc.section.6.2">6.2</a> <a name="appcatsex" href="#appcatsex">Document Extensibility</a></h2><p id="rfc.section.6.2.p.1">Unrecognized markup in an Atom Publishing Protocol document is considered "foreign markup" as defined in <a href="#RFC4287" title="The Atom Syndication Format">[RFC4287]</a>. Such foreign markup can be used anywhere within a Category or Service Document unless it is explicitly forbidden. Processors that encounter foreign markup MUST NOT stop processing or signal an error, and SHOULD preserve foreign markup when transmitting such documents.</p><p id="rfc.section.6.2.p.2">The namespace name "http://purl.org/atom/app#" is reserved for forward compatible revisions of the Category and Service Document types - this does not exclude the addition of elements and attributes that might not be recognised by processors conformant to this specification. Such unrecognised markup from the "http://purl.org/atom/app#" namespace MUST be treated as foreign markup.</p><hr class="noprint"><h1 id="rfc.section.7" class="np"><a href="#rfc.section.7">7.</a> <a name="catdocs" href="#catdocs">Category Documents</a></h1><p id="rfc.section.7.p.1">Category Documents contain lists of categories described using the "atom:category" element from the Atom Syndication Format <a href="#RFC4287" title="The Atom Syndication Format">[RFC4287]</a>. Categories can also appear in Service Documents and describe the categories allowed in a Collection (see <a href="#categories-elem" title='The "app:categories" Element'>Section 8.2.5</a>).</p><p id="rfc.section.7.p.2">Category Documents are identified with the "application/atomcat+xml" media type (see <a href="#iana" title="IANA Considerations">Section 15</a>).</p><h2 id="rfc.section.7.1"><a href="#rfc.section.7.1">7.1</a> <a name="catdocseg" href="#catdocseg">Example</a></h2><div id="rfc.figure.u.10"></div> <pre>
    &lt;?xml version="1.0" ?&gt;
    &lt;app:categories
        xmlns:app="http://purl.org/atom/app#"
        xmlns="http://www.w3.org/2005/Atom"
        fixed="yes" scheme="http://example.com/cats/big3"&gt;
      &lt;category term="animal" /&gt;
      &lt;category term="vegetable" /&gt;
      &lt;category term="mineral" /&gt;
    &lt;/app:categories&gt;
</pre> <p id="rfc.section.7.1.p.2">This Category Document contains three categories, with the terms "animal", "vegetable", and "mineral". None of the categories use the 'label' attribute defined in <a href="#RFC4287" title="The Atom Syndication Format">[RFC4287]</a>. They all inherit the "http://example.com/cats/big3" 'scheme' attribute declared on the app:categories element. Therefore if the "mineral" category were to appear in an Atom Entry or Feed Document, it would appear as:</p><div id="rfc.figure.u.11"></div> <pre>
    &lt;category scheme="http://example.com/cats/big3" term="mineral" /&gt;
</pre> <h2 id="rfc.section.7.2"><a href="#rfc.section.7.2">7.2</a> <a name="catdocselemdef" href="#catdocselemdef">Element Definitions</a></h2><h3 id="rfc.section.7.2.1"><a href="#rfc.section.7.2.1">7.2.1</a> <a name="appcats" href="#appcats">The "app:categories" element</a></h3><p id="rfc.section.7.2.1.p.1">The root of a Category Document is the "app:categories" element. An app:categories element can contain zero or more "atom:category" elements from the Atom namespace ("http://www.w3.org/2005/Atom").</p><p id="rfc.section.7.2.1.p.2">An app:category child element that has no "scheme" attribute inherits the attribute from its app:categories parent. An app:category child element with an existing "scheme" attribute does not inherit the "scheme" value of its "app:categories" parent element.</p><h4 id="rfc.section.7.2.1.1"><a href="#rfc.section.7.2.1.1">7.2.1.1</a> <a name="appcatsattr" href="#appcatsattr">Attributes of "app:categories"</a></h4><p id="rfc.section.7.2.1.1.p.1">The app:categories element can contain a "fixed" attribute, with a value of either "yes" or "no", indicating whether the list of categories is a fixed or an open set. Newly created or updated members whose categories are not listed in the Collection Document MAY be rejected by the server. Collections that indicate the set is open SHOULD NOT reject otherwise acceptable members whose categories are not listed in the Collection.</p><p id="rfc.section.7.2.1.1.p.2">Alternatively, the app:categories element MAY contain an "href" attribute, whose value MUST be an IRI reference identifying a Category Document. If the "href" attribute is provided the app:categories element MUST be empty and MUST NOT have the "fixed" or "scheme" attributes.</p><p id="rfc.section.7.2.1.1.p.3"> </p><div id="rfc.figure.u.12"></div> <pre>
atomCategory =
    element atom:category {
       atomCommonAttributes,
       attribute term { text },
       attribute scheme { atomURI }?,
       attribute label { text }?,
       undefinedContent
    }

appInlineCategories =
    element app:categories {
        attribute fixed { "yes" | "no" }?,
        attribute scheme { atomURI }?,
        (atomCategory*)
    }

appOutOfLineCategories =
    element app:categories {
        attribute href { atomURI },
        undefinedContent
    }

appCategories = appInlineCategories | appOutOfLineCategories</pre> <hr class="noprint"><h1 id="rfc.section.8" class="np"><a href="#rfc.section.8">8.</a> <a name="appdocs" href="#appdocs">Service Documents</a></h1><p id="rfc.section.8.p.1">For authoring to commence, a client needs to first discover the capabilities and locations of the available collections. Service Documents are designed to support this discovery process. How Service Documents are in turn discovered is not defined in this specification.</p><p id="rfc.section.8.p.2">A Service Document describes workspaces, which are server-defined groupings of Collections. Service Documents are identified with the "application/atomserv+xml" media type (see <a href="#iana" title="IANA Considerations">Section 15</a>).</p><p id="rfc.section.8.p.3">There is no requirement that a server support multiple workspaces. In addition, a Collection MAY appear in more than one Workspace.</p><h2 id="rfc.section.8.1"><a href="#rfc.section.8.1">8.1</a> <a name="appdocs_example" href="#appdocs_example">Example</a></h2><div id="rfc.figure.u.13"></div> <pre>
&lt;?xml version="1.0" encoding='utf-8'?&gt;
&lt;service xmlns="http://purl.org/atom/app#"
         xmlns:atom="http://www.w3.org/2005/Atom"&gt;
  &lt;workspace&gt;
    &lt;atom:title&gt;Main Site&lt;/atom:title&gt;
    &lt;collection
        href="http://example.org/reilly/main" &gt;
      &lt;atom:title&gt;My Blog Entries&lt;/atom:title&gt;
      &lt;categories
         href="http://example.com/cats/forMain.cats" /&gt;
    &lt;/collection&gt;
    &lt;collection
        href="http://example.org/reilly/pic" &gt;
      &lt;atom:title&gt;Pictures&lt;/atom:title&gt;
      &lt;accept&gt;image/*&lt;/accept&gt;
    &lt;/collection&gt;
  &lt;/workspace&gt;
  &lt;workspace&gt;
    &lt;atom:title&gt;Side Bar Blog&lt;/atom:title&gt;
    &lt;collection
        href="http://example.org/reilly/list" &gt;
      &lt;atom:title&gt;Remaindered Links&lt;/atom:title&gt;
      &lt;accept&gt;entry&lt;/accept&gt;
      &lt;categories fixed="yes"&gt;
        &lt;atom:category
          scheme="http://example.org/extra-cats/"
          term="joke" /&gt;
        &lt;atom:category
          scheme="http://example.org/extra-cats/"
          term="serious" /&gt;
      &lt;/categories&gt;
    &lt;/collection&gt;
  &lt;/workspace&gt;
&lt;/service&gt;
</pre> <p id="rfc.section.8.1.p.2">This Service Document describes two workspaces. The first Workspace is called "Main Site", has two collections called "My Blog Entries" and "Pictures" whose IRIs are "http://example.org/reilly/main" and "http://example.org/reilly/pic" respectively. The "Pictures" Workspace includes an "accept" element indicating that a client can post image files to the Collection to create new entries. Entries with associated media resources are discussed in <a href="#media-link-entries" title="Media Resources and Media Link Entries">Section 9.5</a>.</p><p id="rfc.section.8.1.p.3">The second Workspace is called "Side Bar Blog" and has a single Collection called "Remaindered Links" whose IRI is "http://example.org/reilly/list".</p><p id="rfc.section.8.1.p.4">Within each of the two entry collections, the categories element provides a list of available categories for member entries. In the "My Blog Entries" Collection, the list of available categories is obtainable through the "href" attribute. The "Side Bar Blog" Collection provides a category list within the Service Document, but states the list is fixed, signaling a request from the server that entries be posted using only those two categories.</p><h2 id="rfc.section.8.2"><a href="#rfc.section.8.2">8.2</a> <a name="service_document_elements" href="#service_document_elements">Element Definitions</a></h2><h3 id="rfc.section.8.2.1"><a href="#rfc.section.8.2.1">8.2.1</a> The "app:service" Element</h3><p id="rfc.section.8.2.1.p.1">The root of a Service Document is the "app:service" element.</p><p id="rfc.section.8.2.1.p.2">The "app:service" element is the container for service information associated with one or more workspaces. An app:service element MUST contain one or more app:workspace elements.</p><p id="rfc.section.8.2.1.p.3"> </p><div id="rfc.figure.u.14"></div> <pre>
namespace app = "http://purl.org/atom/app#"
start = appService
             </pre> <p id="rfc.section.8.2.1.p.4"> </p><div id="rfc.figure.u.15"></div> <pre>
appService =
   element app:service {
      appCommonAttributes,
      ( appWorkspace+
        &amp; extensionElement* )
   }</pre> <h3 id="rfc.section.8.2.2"><a href="#rfc.section.8.2.2">8.2.2</a> The "app:workspace" Element</h3><p id="rfc.section.8.2.2.p.1">The "app:workspace" element contains information elements about the collections of resources available for editing. The app:workspace element contains zero or more app:collection elements.</p><p id="rfc.section.8.2.2.p.2"> </p><div id="rfc.figure.u.16"></div> <pre>
appWorkspace =
   element app:workspace {
      appCommonAttributes,
      ( atomTitle
        &amp; appCollection*
        &amp; extensionElement* )
   }

atomTitle = element atom:title { atomTextConstruct }</pre> <p id="rfc.section.8.2.2.p.3">In an app:workspace element, the first app:collection element MUST refer to the preferred or primary Collection. This distinction is considered useful in scenarios where Members and Media Link Entries are POSTed to different Collections. In the following example, the "Eintragungen" collection would be considered the preferred Collection:</p><p id="rfc.section.8.2.2.p.4"> </p><div id="rfc.figure.u.17"></div> <pre>    &lt;service xmlns="http://purl.org/atom/app#"
     xmlns:atom="http://www.w3.org/2005/Atom"&gt;
      &lt;workspace xml:lang="de"&gt;
        &lt;atom:title&gt;Das Blog&lt;/atom:title&gt;
        &lt;collection
             href="http://example.org/blog/eintragungen" &gt;
          &lt;atom:title&gt;Eintragungen&lt;/atom:title&gt;
       &lt;/collection&gt;
        &lt;collection
             href="http://example.org/blog/fotos"&gt;
           &lt;atom:title&gt;Fotos&lt;/atom:title&gt;
           &lt;accept&gt;image/*&lt;/accept&gt;
        &lt;/collection&gt;
      &lt;/workspace&gt;
    &lt;/service&gt; </pre> <h4 id="rfc.section.8.2.2.1"><a href="#rfc.section.8.2.2.1">8.2.2.1</a> The "atom:title" Element</h4><p id="rfc.section.8.2.2.1.p.1">The app:workspace element MUST contain one "atom:title" element (as defined in <a href="#RFC4287" title="The Atom Syndication Format">[RFC4287]</a>), giving a human-readable title for the workspace.</p><h3 id="rfc.section.8.2.3"><a href="#rfc.section.8.2.3">8.2.3</a> The "app:collection" Element</h3><p id="rfc.section.8.2.3.p.1">The "app:collection" element describes a Collection. The app:collection element MAY contain one app:accept element and MAY contain any number of app:categories elements. The app:collection element MUST NOT contain more than one app:accept element.</p><p id="rfc.section.8.2.3.p.2"> </p><div id="rfc.figure.u.18"></div> <pre>
appCollection =
   element app:collection {
      appCommonAttributes,
      attribute href { atomURI  },
      ( atomTitle
        &amp; appAccept?
        &amp; appCategories*
        &amp; extensionElement* )
   }</pre> <h4 id="rfc.section.8.2.3.1"><a href="#rfc.section.8.2.3.1">8.2.3.1</a> Usage in Atom Feed Documents</h4><p id="rfc.section.8.2.3.1.p.1">The app:collection element MAY appear as a child of an atom:feed or atom:source element in an Atom Feed Document. Its value identifies a Collection by which new entries can be added to appear in the feed. The app:control element is considered foreign markup as defined in Section 6 of <a href="#RFC4287" title="The Atom Syndication Format">[RFC4287]</a>.</p><h4 id="rfc.section.8.2.3.2"><a href="#rfc.section.8.2.3.2">8.2.3.2</a> The "href" Attribute</h4><p id="rfc.section.8.2.3.2.p.1">The app:collection element MUST contain an "href" attribute, whose value gives the IRI of the Collection.</p><h4 id="rfc.section.8.2.3.3"><a href="#rfc.section.8.2.3.3">8.2.3.3</a> The "atom:title" Element</h4><p id="rfc.section.8.2.3.3.p.1">The app:collection Element MUST contain one "atom:title" element, giving a human-readable title for the Workspace.</p><h3 id="rfc.section.8.2.4"><a href="#rfc.section.8.2.4">8.2.4</a> <a name="accept" href="#accept">The "app:accept" Element</a></h3><p id="rfc.section.8.2.4.p.1">The "app:accept" element value specifies a comma-separated list of media-ranges (see <a href="#RFC2616" title="Hypertext Transfer Protocol -- HTTP/1.1">[RFC2616]</a>) identifying the types of representations that can be POSTed to the URI of a Collection. Whitespace around and between media-range values is considered insignificant and MUST be ignored.</p><p id="rfc.section.8.2.4.p.2">The app:accept element is similar to the HTTP Accept request-header <a href="#RFC2616" title="Hypertext Transfer Protocol -- HTTP/1.1">[RFC2616]</a> with the exception that app:accept has no notion of preference. As a result, the value syntax of app:accept does not use "accept-params" or "q" arguments as specified in <a href="#RFC2616" title="Hypertext Transfer Protocol -- HTTP/1.1">[RFC2616]</a>, section 14.1.</p><p id="rfc.section.8.2.4.p.3">The order of media-ranges is not significant. The following lists are all equivalent:</p><p id="rfc.section.8.2.4.p.4"> </p><div id="rfc.figure.u.19"></div> <pre>
  &lt;app:accept&gt;image/png,image/*&lt;/app:accept&gt;
  &lt;app:accept&gt;image/*, image/png&lt;/app:accept&gt;
  &lt;app:accept&gt; image/* &lt;/app:accept&gt; </pre> <p id="rfc.section.8.2.4.p.5">A value of "entry" may appear in any list of media-ranges in an accept element and indicates that Atom Entry Documents can be posted to the Collection. If the accept element is omitted or empty, clients SHOULD assume that only Atom Entry documents will be accepted by the Collection.</p><p id="rfc.section.8.2.4.p.6"> </p><div id="rfc.figure.u.20"></div> <pre>
appAccept =
   element app:accept {
         appCommonAttributes,
         ( appTypeValue? )
   }


appTypeValue = ( "entry" | media-type |entry-or-media-type  )
media-type = xsd:string { pattern = "entry,(.+/.+,?)*" }
entry-or-media-type = xsd:string { pattern = "(.+/.+,?)*" }</pre> <h3 id="rfc.section.8.2.5"><a href="#rfc.section.8.2.5">8.2.5</a> <a name="categories-elem" href="#categories-elem">The "app:categories" Element</a></h3><p id="rfc.section.8.2.5.p.1">The "app:categories" element provides a listing of the categories that can be applied to the members of a Collection.</p><p id="rfc.section.8.2.5.p.2"> </p><div id="rfc.figure.u.21"></div> <pre>
atomCategory =
    element atom:category {
       atomCommonAttributes,
       attribute term { text },
       attribute scheme { atomURI }?,
       attribute label { text }?,
       undefinedContent
    }

appInlineCategories =
    element app:categories {
        attribute fixed { "yes" | "no" }?,
        attribute scheme { atomURI }?,
        (atomCategory*)
    }

appOutOfLineCategories =
    element app:categories {
        attribute href { atomURI },
        undefinedContent
    }

appCategories = appInlineCategories | appOutOfLineCategories</pre> <p id="rfc.section.8.2.5.p.3">The app:categories element MAY contain a "fixed" attribute, with a value of either "yes" or "no", indicating whether or not the listing of categories is considered to be a fixed, or closed set. The absence of the "fixed" attribute is equivalent to the presence of a "fixed" attribute with a value of "no". Collections that indicate a fixed set MAY reject members that include categories not specified in the provided listing. Collections that indicate an open set SHOULD NOT reject otherwise acceptable members whose categories are not present in the provided list.</p><p id="rfc.section.8.2.5.p.4">The app:categories element MAY contain an "href" attribute, whose value MUST be an IRI reference identifying a Category Document. If the "href" attribute is provided, the app:categories element MUST be empty and the "fixed" and "scheme" attributes MUST NOT be present.</p><hr class="noprint"><h1 id="rfc.section.9" class="np"><a href="#rfc.section.9">9.</a> <a name="collection_resource" href="#collection_resource">Creating and Editing Resources</a></h1><h2 id="rfc.section.9.1"><a href="#rfc.section.9.1">9.1</a> <a name="memuri" href="#memuri">Member URIs</a></h2><p id="rfc.section.9.1.p.1">The Member URI supports retrieving, updating and deleting the resource using HTTP GET, PUT and DELETE as described in this section. Retrieval and updating of Member Entry Resources are done via Atom Entry representations.</p><p id="rfc.section.9.1.p.2">Member Entry URIs appear in two places. First, they are returned in a Location header after successful resource creation using POST, as described below. Second, in the entries of a Collection document, by an atom:link element with a link relation of "edit".</p><p id="rfc.section.9.1.p.3">Each Member Entry SHOULD contain such an atom:link element providing its Member Entry URI.</p><h2 id="rfc.section.9.2"><a href="#rfc.section.9.2">9.2</a> Creating resources with POST</h2><p id="rfc.section.9.2.p.1">To add members to a Collection, clients send POST requests to the URI of a Collection. Successful member creation is normally indicated with a 201 ("Created") response code. Collections MAY generate a response with a status code of 415 ("Unsupported Media Type") to indicate media-type of POSTed entity is not allowed or supported by the Collection.</p><p id="rfc.section.9.2.p.2">When a Member Resource is created in the Collection which received the POST, its Member Entry URI MUST be returned in an HTTP Location header.</p><p id="rfc.section.9.2.p.3">When the server generates a response with a status code of 201 ("Created"), it SHOULD also return a response body, which if provided, MUST be an Atom Entry Document representing the newly-created resource.</p><p id="rfc.section.9.2.p.4">Since the server is free to alter the posted entry, for example by changing the content of the "id" element, returning the Entry as described in the previous paragraph can be useful to the client, enabling it to correlate the client and server views of the new Entry.</p><p id="rfc.section.9.2.p.5">When the POST request contains an Atom Entry Document, the response from the server SHOULD contain a Content-Location header that contains the same character-by-character value as the Location header.</p><p id="rfc.section.9.2.p.6">The request body sent with the POST need not be an Atom Entry. For example, it might be a picture, or a movie. For a discussion of the issues in posting such content, see <a href="#media-link-entries" title="Media Resources and Media Link Entries">Section 9.5</a>.</p><h3 id="rfc.section.9.2.1"><a href="#rfc.section.9.2.1">9.2.1</a> <a name="create-example" href="#create-example">Example</a></h3><p id="rfc.section.9.2.1.p.1">Below, the client sends a POST request containing an Atom Entry representation to the URI of the Collection: </p><div id="rfc.figure.u.22"></div> <pre>
    POST /myblog/entries HTTP/1.1
    Host: example.org
    User-Agent: Thingio/1.0
    Authorization: Basic ZGFmZnk6c2VjZXJldA==
    Content-Type: application/atom+xml
    Content-Length: nnn
    Slug: First Post

    &lt;?xml version="1.0" ?&gt;
    &lt;entry xmlns="http://www.w3.org/2005/Atom"
        xmlns:app="http://purl.org/atom/app#"&gt;
      &lt;title&gt;Atom-Powered Robots Run Amok&lt;/title&gt;
      &lt;id&gt;urn:uuid:1225c695-cfb8-4ebb-aaaa-80da344efa6a&lt;/id&gt;
      &lt;updated&gt;2003-12-13T18:30:02Z&lt;/updated&gt;
      &lt;author&gt;&lt;name&gt;John Doe&lt;/name&gt;&lt;/author&gt;
      &lt;content&gt;Some text.&lt;/content&gt;
    &lt;/entry&gt;</pre> <p id="rfc.section.9.2.1.p.2">The server signals a successful creation with a status code of 201. The response includes a "Location" header indicating the Member Entry URI of the Atom Entry and a representation of that Entry in the body of the response. </p><div id="rfc.figure.u.23"></div> <pre>
    HTTP/1.1 201 Created
    Date: Fri, 7 Oct 2005 17:17:11 GMT
    Content-Length: nnn
    Content-Type: application/atom+xml; charset="utf-8"
    Content-Location: http://example.org/edit/first-post.atom
    Location: http://example.org/edit/first-post.atom

    &lt;?xml version="1.0"?&gt;
    &lt;entry xmlns="http://www.w3.org/2005/Atom"
        xmlns:app="http://purl.org/atom/app#"&gt;
      &lt;title&gt;Atom-Powered Robots Run Amok&lt;/title&gt;
      &lt;id&gt;urn:uuid:1225c695-cfb8-4ebb-aaaa-80da344efa6a&lt;/id&gt;
      &lt;updated&gt;2003-12-13T18:30:02Z&lt;/updated&gt;
      &lt;author&gt;&lt;name&gt;John Doe&lt;/name&gt;&lt;/author&gt;
      &lt;content&gt;Some text.&lt;/content&gt;
      &lt;link rel="edit"
          href="http://example.org/edit/first-post.atom"/&gt;
    &lt;/entry&gt;</pre> <p id="rfc.section.9.2.1.p.3">The Entry created and returned by the server might not match the Entry POSTed by the client. A server MAY change the values of various elements in the Entry such as the atom:id, atom:updated and atom:author values and MAY choose to remove or add other elements and attributes, or change element and attribute values.</p><p id="rfc.section.9.2.1.p.4">In particular, the publishing system in this example filled in some values not provided in the original POST. For example, it ascertained the name of the author, presumably via the authentication protocol used to establish the right to post.</p><h2 id="rfc.section.9.3"><a href="#rfc.section.9.3">9.3</a> <a name="update-via-PUT" href="#update-via-PUT">Updating Resources with PUT</a></h2><p id="rfc.section.9.3.p.1">To update a resource, clients send PUT requests to its Member URI, as specified in <a href="#RFC2616" title="Hypertext Transfer Protocol -- HTTP/1.1">[RFC2616]</a>.</p><p id="rfc.section.9.3.p.2">To avoid unintentional loss of data when editing Member Entries or Media Link Entries, Atom Protocol clients SHOULD preserve all metadata that has not been intentionally modified, including unknown foreign markup as defined in Section 6 of <a href="#RFC4287" title="The Atom Syndication Format">[RFC4287]</a>.</p><h2 id="rfc.section.9.4"><a href="#rfc.section.9.4">9.4</a> <a name="update-via-DELETE" href="#update-via-DELETE">Deleting Resources with DELETE</a></h2><p id="rfc.section.9.4.p.1">To delete a resource, clients send DELETE requests to its Member URI, as specified in <a href="#RFC2616" title="Hypertext Transfer Protocol -- HTTP/1.1">[RFC2616]</a>. For Media Resources, deletion of a Media Link Entry SHOULD result in the deletion of the associated Media Resource.</p><h2 id="rfc.section.9.5"><a href="#rfc.section.9.5">9.5</a> <a name="media-link-entries" href="#media-link-entries">Media Resources and Media Link Entries</a></h2><p id="rfc.section.9.5.p.1">A client can POST a media type other than application/atom+xml to a Collection. Such a request creates two new resources - one that corresponds to the entity sent in the request, called the Media Resource, and an associated Member Entry, called the Media Link Entry. Media Link Entries are represented as Atom Entries. The server can signal the media types it will accept via the "accept" element in the Service Document (<a href="#accept" title='The "app:accept" Element'>Section 8.2.4</a>).</p><p id="rfc.section.9.5.p.2">The Media Link Entry contains the IRI of the Media Resource and makes metadata about it separately available for retrieval and update. The Media Link Entry is used to store metadata about the (perhaps non-textual) Media Resource.</p><p id="rfc.section.9.5.p.3">Successful responses to creation requests MUST include the URI of the Media Link Entry in the Location header. The Media Link Entry SHOULD contain an atom:link element with a link relation of "edit-media" that contains the Media Resource IRI. The Media Link Entry MUST have an "atom:content" element with a non-empty "src" attribute. The value of the "src" attribute is an IRI of the newly created Media Resource. It is OPTIONAL that the IRI of the "src" attribute on the atom:content element be the same as the Media Resource IRI. That is, the "src" attribute value might instead be a link into a static cache or content distribution network and not be the Media Resource IRI.</p><p id="rfc.section.9.5.p.4">Implementers are asked to note that according to the requirements of <a href="#RFC4287" title="The Atom Syndication Format">[RFC4287]</a>, entries, and thus Media Link Entries, MUST contain an atom:summary element. Upon successful creation of a Media Link Entry, a server MAY choose to populate the atom:summary element (as well as other required elements such as atom:id, atom:author and atom:title) with content derived from the POSTed entity or from any other source. A server might not allow a client to modify the server selected values for these elements.</p><p id="rfc.section.9.5.p.5">For resource creation this specification only defines cases where the POST body has an Atom Entry entity declared as an Atom media type ("application/atom+xml"), or a non-Atom entity declared as a non-Atom media type. It does not specify any request semantics or server behavior in the case where the POSTed media-type is "application/atom+xml" but the body is something other than an Atom Entry. In particular, what happens on POSTing an Atom Feed Document to a Collection using the "application/atom+xml" media type is undefined.</p><h2 id="rfc.section.9.6"><a href="#rfc.section.9.6">9.6</a> The Slug: Header</h2><p id="rfc.section.9.6.p.1">Slug is a HTTP entity-header whose value is a "slug" - a short name that can be used as part of the URI for a Member Resource.</p><p id="rfc.section.9.6.p.2">When posting an entity to a Collection to add a new Member, the server MAY use this information when creating the Member URI of the newly-created resource, for instance by using some or all of the words in the last URI segment. It MAY also use it when creating the atom:id or as the title of a Media Link Entry (see <a href="#media-link-entries" title="Media Resources and Media Link Entries">Section 9.5</a>.).</p><p id="rfc.section.9.6.p.3">Servers MAY ignore the Slug entity-header and MAY alter its value before using it. For example, the server MAY filter out some characters or replace accented letters with non-accented ones, spaces with underscores, etc.</p><h3 id="rfc.section.9.6.1"><a href="#rfc.section.9.6.1">9.6.1</a> Slug: Header syntax</h3><p id="rfc.section.9.6.1.p.1">The syntax of this header MUST conform to the augmented BNF grammar in section 2.1 of the HTTP/1.1 specification <a href="#RFC2616" title="Hypertext Transfer Protocol -- HTTP/1.1">[RFC2616]</a>. The TEXT rule is described in section 2.2 of the same document.</p><div id="rfc.figure.u.24"></div> <pre>
    Slug = "Slug" ":" *TEXT
</pre> <p id="rfc.section.9.6.1.p.3">Clients MAY send non-ASCII characters in the Slug entity-header, which they MUST encode using "encoded-words", as defined in <a href="#RFC2047" title="MIME (Multipurpose Internet Mail Extensions) Part Three: Message Header Extensions for Non-ASCII Text">[RFC2047]</a>. Servers SHOULD treat the slug as <a href="#RFC2047" title="MIME (Multipurpose Internet Mail Extensions) Part Three: Message Header Extensions for Non-ASCII Text">[RFC2047]</a> encoded if it matches the "encoded-words" production.</p><h3 id="rfc.section.9.6.2"><a href="#rfc.section.9.6.2">9.6.2</a> <a name="title-header-example" href="#title-header-example">Examples</a></h3><p id="rfc.section.9.6.2.p.1">Below, the client sends a POST request containing a PNG image to the URI of the Collection:</p><p id="rfc.section.9.6.2.p.2"> </p><div id="rfc.figure.u.25"></div> <pre>
    POST /myblog/entries HTTP/1.1
    Host: example.org
    Content-Type: image/png
    Slug: The Beach
    Authorization: Basic ZGFmZnk6c2VjZXJldA==
    Content-Length: nnn

    ...binary data... </pre> <p id="rfc.section.9.6.2.p.3">The server signals a successful creation with a status code of 201. The response includes a Location header indicating the Member URI of the Media Link Entry and a representation of that entry in the body of the response. The Media Link Entry includes a content element with a src attribute, and a link using the link relation "edit-media" specifying the IRI to be used for modifying the Media Resource.</p><p id="rfc.section.9.6.2.p.4"> </p><div id="rfc.figure.u.26"></div> <pre>
    HTTP/1.1 201 Created
    Date: Fri, 7 Oct 2005 17:17:11 GMT
    Content-Length: nnn
    Content-Type: application/atom+xml; charset="utf-8"
    Content-Location: http://example.org/myblog/edit/the_beach
    Location: http://example.org/myblog/edit/the_beach

    &lt;?xml version="1.0"?&gt;
    &lt;entry xmlns="http://www.w3.org/2005/Atom"&gt;
      &lt;title&gt;The Beach&lt;/title&gt;
      &lt;id&gt;urn:uuid:1225c695-cfb8-4ebb-aaaa-80da344efa6a&lt;/id&gt;
      &lt;updated&gt;2005-10-07T17:17:08Z&lt;/updated&gt;
      &lt;author&gt;&lt;name&gt;Daffy&lt;/name&gt;&lt;/author&gt;
      &lt;summary type="text" /&gt;
      &lt;content type="image/png"
         src="http://example.org/media/the_beach.png"/&gt;
      &lt;link rel="edit-media"
         href="http://example.org/media/edit/the_beach.png" /&gt;
      &lt;link rel="edit"
         href="http://example.org/myblog/edit/the_beach /&gt;
    &lt;/entry&gt; </pre> <p id="rfc.section.9.6.2.p.5">Here is an example of the Slug: header that uses the encoding rules of <a href="#RFC2047" title="MIME (Multipurpose Internet Mail Extensions) Part Three: Message Header Extensions for Non-ASCII Text">[RFC2047]</a>.</p><p id="rfc.section.9.6.2.p.6"> </p><div id="rfc.figure.u.27"></div> <pre>
    POST /myblog/entries HTTP/1.1
    Host: example.org
    Content-Type: image/png
    Slug: =?iso-8859-1?q?The_Beach?=
    Authorization: Basic ZGFmZnk6c2VjZXJldA==
    Content-Length: nnn

    ...binary data... </pre> <p id="rfc.section.9.6.2.p.7">See <a href="#create-example" title="Example">Section 9.2.1</a> for an example of the Slug: header applied to the creation of a Member Entry Resource.</p><hr class="noprint"><h1 id="rfc.section.10" class="np"><a href="#rfc.section.10">10.</a> <a name="templates" href="#templates">Listing Collections</a></h1><p id="rfc.section.10.p.1">Collection resources MUST provide representations in the form of Atom Feed documents whose entries represent the Members in the Collection. Each entry in the Feed Document SHOULD have an atom:link element with a relation of "edit" (See <a href="#new-link-relation" title='The "edit" Link Relation'>Section 11.1</a>).</p><p id="rfc.section.10.p.2">The entries in the returned Atom Feed SHOULD be ordered by their "atom:updated" property, with the most recently updated entries coming first in the document order. Clients SHOULD be constructed in consideration of the fact that changes which do not alter the atom:updated value of an entry will not affect the position of the entry in a Collection.</p><p id="rfc.section.10.p.3">Clients MUST NOT assume that an Atom Entry returned in the Feed is a full representation of a Member Entry Resource and SHOULD perform a GET on the URI of the Member Entry before editing.</p><h2 id="rfc.section.10.1"><a href="#rfc.section.10.1">10.1</a> Collection Paging</h2><p id="rfc.section.10.1.p.1">Collections can contain large numbers of resources. A naive client such as a web spider or web browser could be overwhelmed if the response to a GET contained every entry in the Collection, and the server would waste large amounts of bandwidth and processing time on clients unable to handle the response. For this reason, servers MAY return a partial listing of the most recently updated Member Resources. Such partial feed documents MUST have an atom:link with a "next" relation whose "href" value is the URI of the next partial listing of the Collection (the next most recently updated Member Resources) where it exists. This is called "Collection paging".</p><p id="rfc.section.10.1.p.2">The returned Atom Feed MAY contain a subset the Member Entries for a Collection. In addition, the Atom Feed document MAY contain link elements with "rel" attribute values of "next", "previous", "first" and "last" that can be used to navigate through the complete set of matching entries.</p><p id="rfc.section.10.1.p.3">For instance, suppose a client is supplied the URI "http://example.org/entries/go" of a Collection of Member entries, where the server as a matter of policy avoids generating feed documents containing more than 10 entries. The Atom Feed document for the Collection will then represent the first 'page' in a set of 10 linked feed documents. The "first" relation will reference the initial feed document in the set and the "last" relation references the final Atom Feed Document in the set. Within each document, the "next" and "previous" link relations reference the preceding and subsequent documents. </p><div id="rfc.figure.u.28"></div> <pre>
  &lt;feed xmlns="http://www.w3.org/2005/Atom"&gt;
    &lt;link rel="first"
          href="http://example.org/entries/go" /&gt;
    &lt;link rel="next"
          href="http://example.org/entries/2" /&gt;
    &lt;link rel="last"
          href="http://example.org/entries/10" /&gt;
    ...
  &lt;/feed&gt;
</pre> <p id="rfc.section.10.1.p.4">The "next" and "previous" link elements for the feed 'page' located at "http://example.org/entries/2" would look like this: </p><div id="rfc.figure.u.29"></div> <pre>
  &lt;feed xmlns="http://www.w3.org/2005/Atom"&gt;
    &lt;link rel="first"
          href="http://example.org/entries/go" /&gt;
    &lt;link rel="previous"
          href="http://example.org/entries/go" /&gt;
    &lt;link rel="next"
          href="http://example.org/entries/3" /&gt;
    &lt;link rel="last"
          href="http://example.org/entries/10" /&gt;
    ...
  &lt;/feed&gt;
</pre> <h2 id="rfc.section.10.2"><a href="#rfc.section.10.2">10.2</a> The "app:edited" Element</h2><p id="rfc.section.10.2.p.1">The "app:edited" element is a Date construct as defined by [RFC4287] whose value indicates the most recent instant in time when an entry was edited, including when created. Atom entry elements in Collection documents SHOULD contain one "app:edited" element, and MUST NOT contain more than one.</p><div id="rfc.figure.u.30"></div> <pre>
appEdited = element app:edited ( atomDateConstruct )
</pre> <p id="rfc.section.10.2.p.3">The server SHOULD change the value of this element every time a Collection Member Resource or an associated Media Resource has been edited by any means.</p><hr class="noprint"><h1 id="rfc.section.11" class="np"><a href="#rfc.section.11">11.</a> <a name="atom-entry-extensions" href="#atom-entry-extensions">Atom Format Link Relation Extensions</a></h1><h2 id="rfc.section.11.1"><a href="#rfc.section.11.1">11.1</a> <a name="new-link-relation" href="#new-link-relation">The "edit" Link Relation</a></h2><p id="rfc.section.11.1.p.1">This specification adds the value "edit" to the Atom Registry of Link Relations (see section 7.1 of <a href="#RFC4287" title="The Atom Syndication Format">[RFC4287]</a>). The value of "edit" specifies that the value of the href attribute is the IRI of an editable Member Entry. When appearing within an atom:entry, the href IRI can be used to retrieve, update and delete the resource represented by that entry. An atom:entry MUST contain no more than one "edit" link relation.</p><h2 id="rfc.section.11.2"><a href="#rfc.section.11.2">11.2</a> <a name="new-media-link-relation" href="#new-media-link-relation">The "edit-media" Link Relation</a></h2><p id="rfc.section.11.2.p.1">This specification adds the value "edit-media" to the Atom Registry of Link Relations (see section 7.1 of <a href="#RFC4287" title="The Atom Syndication Format">[RFC4287]</a>). When appearing within an atom:entry, the value of the href attribute is an IRI that can be used to modify a Media Resource associated with that entry.</p><p id="rfc.section.11.2.p.2">An atom:entry element MAY contain zero or more "edit-media" link relations. An atom:entry MUST NOT contain more than one atom:link element with a rel attribute value of "edit-media" that has the same type and hreflang attribute values. All "edit-media" link relations in the same entry reference the same resource. If a client encounters multiple "edit-media" link relations in an entry then it SHOULD choose a link based on the client preferences for type and hreflang. If a client encounters multiple "edit-media" link relations in an entry and has no preference based on the type and hreflang attributes then the client SHOULD pick the first "edit-media" link relation in document order.</p><hr class="noprint"><h1 id="rfc.section.12" class="np"><a href="#rfc.section.12">12.</a> <a name="pub-control" href="#pub-control">Atom Publishing Controls</a></h1><p id="rfc.section.12.p.1">This specification defines an Atom Format Structured Extension, as defined in Section 6 of <a href="#RFC4287" title="The Atom Syndication Format">[RFC4287]</a>, for publishing control within the http://purl.org/atom/app# namespace.</p><h2 id="rfc.section.12.1"><a href="#rfc.section.12.1">12.1</a> The "app:control" Element</h2><div id="rfc.figure.u.31"></div> <pre>
namespace app = "http://purl.org/atom/app#"

 pubControl =
    element app:control {
    atomCommonAttributes,
    pubDraft?
    &amp; extensionElement
 }

 pubDraft =
   element app:draft { "yes" | "no" }</pre> <p id="rfc.section.12.1.p.2">The "app:control" element MAY appear as a child of an atom:entry which is being created or updated via the Atom Publishing Protocol. The app:control element MUST appear only once in an Entry. The app:control element is considered foreign markup as defined in Section 6 of <a href="#RFC4287" title="The Atom Syndication Format">[RFC4287]</a>.</p><p id="rfc.section.12.1.p.3">The app:control element and its child elements MAY be included in Atom Feed or Entry Documents.</p><p id="rfc.section.12.1.p.4">The app:control element can contain an optional "app:draft" element as defined below, and can contain extension elements as defined in Section 6 of <a href="#RFC4287" title="The Atom Syndication Format">[RFC4287]</a>.</p><h3 id="rfc.section.12.1.1"><a href="#rfc.section.12.1.1">12.1.1</a> The "app:draft" Element</h3><p id="rfc.section.12.1.1.p.1">The number of app:draft elements in app:control MUST be zero or one. Its value MUST be one of "yes" or "no". A value of "no" indicates a client request that the Member Resource be made publicly visible. If the app:draft element is missing then the value MUST be understood to be "no". The inclusion of the app:draft element represents a request by the client to control the visibility of a Member Resource and the app:draft element MAY be ignored by the server.</p><hr class="noprint"><h1 id="rfc.section.13" class="np"><a href="#rfc.section.13">13.</a> Securing the Atom Publishing Protocol</h1><p id="rfc.section.13.p.1">The Atom Publishing Protocol is based on HTTP. Authentication requirements for HTTP are covered in Section 11 of <a href="#RFC2616" title="Hypertext Transfer Protocol -- HTTP/1.1">[RFC2616]</a>.</p><p id="rfc.section.13.p.2">The use of authentication mechanisms to prevent posting or editing by unknown or unauthorized clients is RECOMMENDED but not required. When authentication is not used, clients and servers are vulnerable to trivial spoofing, denial of service and defacement attacks, however, in some contexts, this is an acceptable risk.</p><p id="rfc.section.13.p.3">The type of authentication deployed is a local decision made by the server operator. Clients are likely to face authentication schemes that vary across server deployments. At a minimum, client and server implementations MUST be capable of being configured to use HTTP Basic Authentication <a href="#RFC2617" title="HTTP Authentication: Basic and Digest Access Authentication">[RFC2617]</a> in conjunction with a TLS connection <a href="#RFC4346" title="The Transport Layer Security (TLS) Protocol Version 1.1">[RFC4346]</a> as specified by <a href="#RFC2818" title="HTTP Over TLS">[RFC2818]</a>.</p><p id="rfc.section.13.p.4">The choice of authentication mechanism will impact interoperability. The minimum level of security referenced above (Basic Auth with TLS) is considered good practice for Internet applications at the time of publication of this specification and sufficient for establishing a baseline for interoperability. Implementers should, in general, investigate and use alternative mechanisms regarded as equivalently good or better at the time of deployment. It is RECOMMENDED that clients be implemented in such a way that allows new authentication schemes to be deployed.</p><p id="rfc.section.13.p.5">Because this protocol uses HTTP response status codes as the primary means of reporting the result of a request, servers are advised to respond to unauthorized or unauthenticated requests using an appropriate 4xx HTTP response code (e.g. 401 "Unauthorized" or 403 "Forbidden") in accordance with <a href="#RFC2617" title="HTTP Authentication: Basic and Digest Access Authentication">[RFC2617]</a>.</p><hr class="noprint"><h1 id="rfc.section.14" class="np"><a href="#rfc.section.14">14.</a> Security Considerations</h1><p id="rfc.section.14.p.1">As an HTTP-based protocol, APP is subject to the security considerations found in Section 15 of <a href="#RFC2616" title="Hypertext Transfer Protocol -- HTTP/1.1">[RFC2616]</a>.</p><h2 id="rfc.section.14.1"><a href="#rfc.section.14.1">14.1</a> Denial of Service</h2><p id="rfc.section.14.1.p.1">Atom Publishing server implementations need to take adequate precautions to ensure malicious clients cannot consume excessive server resources (CPU, memory, disk, etc).</p><h2 id="rfc.section.14.2"><a href="#rfc.section.14.2">14.2</a> Replay Attacks</h2><p id="rfc.section.14.2.p.1">Atom Publishing server implementations are susceptible to replay attacks. Specifically, this specification does not define a means of detecting duplicate requests. Accidentally sent duplicate requests are indistinguishable from intentional and malicious replay attacks.</p><h2 id="rfc.section.14.3"><a href="#rfc.section.14.3">14.3</a> Spoofing Attacks</h2><p id="rfc.section.14.3.p.1">Atom Publishing implementations are susceptible to a variety of spoofing attacks. Malicious clients may send Atom entries containing inaccurate information anywhere in the document.</p><h2 id="rfc.section.14.4"><a href="#rfc.section.14.4">14.4</a> Linked Resources</h2><p id="rfc.section.14.4.p.1">Atom Feed and Entry documents can contain XML External Entities as defined in Section 4.2.2 of <a href="#W3C.REC-xml-20060816" title="Extensible Markup Language (XML) 1.0 (Fourth Edition)">[W3C.REC-xml-20060816]</a>. Atom implementations are not required to load external entities. External entities are subject to the same security concerns as any network operation and can alter the semantics of an Atom document. The same issues exist for resources linked to by Atom elements such as atom:link and atom:content.</p><h2 id="rfc.section.14.5"><a href="#rfc.section.14.5">14.5</a> Digital Signatures and Encryption</h2><p id="rfc.section.14.5.p.1">Atom Entry Documents sent to a server might contain XML Digital Signatures <a href="#W3C.REC-xmldsig-core-20020212" title="XML-Signature Syntax and Processing">[W3C.REC-xmldsig-core-20020212]</a> and might be encrypted using XML Encryption <a href="#W3C.REC-xmlenc-core-20021210" title="XML Encryption Syntax and Processing">[W3C.REC-xmlenc-core-20021210]</a> as specified in Section 5 of <a href="#RFC4287" title="The Atom Syndication Format">[RFC4287]</a>.</p><p id="rfc.section.14.5.p.2">Servers are allowed to modify received resource representations in ways that can invalidate signatures covering those representations.</p><h2 id="rfc.section.14.6"><a href="#rfc.section.14.6">14.6</a> URIs and IRIs</h2><p id="rfc.section.14.6.p.1">Atom Publishing Protocol implementations handle URIs and IRIs. See Section 7 of <a href="#RFC3986" title="Uniform Resource Identifier (URI): Generic Syntax">[RFC3986]</a> and Section 8 of <a href="#RFC3987" title="Internationalized Resource Identifiers (IRIs)">[RFC3987]</a>.</p><hr class="noprint"><h1 id="rfc.section.15" class="np"><a href="#rfc.section.15">15.</a> <a name="iana" href="#iana">IANA Considerations</a></h1><h2 id="rfc.section.15.1"><a href="#rfc.section.15.1">15.1</a> <a name="iana-atomserv" href="#iana-atomserv">Content-type registration for 'application/atomserv+xml'</a></h2><p id="rfc.section.15.1.p.1">An Atom Publishing Protocol Service Document, when serialized as XML 1.0, can be identified with the following media type:</p><p id="rfc.section.15.1.p.2"> </p><dl><dt style="margin-top: .5em">MIME media type name:</dt><dd>application</dd><dt style="margin-top: .5em">MIME subtype name:</dt><dd>atomserv+xml</dd><dt style="margin-top: .5em">Mandatory parameters:</dt><dd>None.</dd><dt style="margin-top: .5em">Optional parameters:</dt><dd> <dl><dt style="margin-top: .5em">"charset":</dt><dd>This parameter has identical semantics to the charset parameter of the "application/xml" media type as specified in <a href="#RFC3023" title="XML Media Types">[RFC3023]</a>.</dd></dl> </dd><dt style="margin-top: .5em">Encoding considerations:</dt><dd>Identical to those of "application/xml" as described in <a href="#RFC3023" title="XML Media Types">[RFC3023]</a>, section 3.2.</dd><dt style="margin-top: .5em">Security considerations:</dt><dd>As defined in this specification. <span class="comment">[rfc.comment.2: update upon publication]</span></dd><dt style="margin-top: .5em"></dt><dd>In addition, as this media type uses the "+xml" convention, it shares the same security considerations as described in <a href="#RFC3023" title="XML Media Types">[RFC3023]</a>, section 10.</dd><dt style="margin-top: .5em">Interoperability considerations:</dt><dd>There are no known interoperability issues.</dd><dt style="margin-top: .5em">Published specification:</dt><dd>This specification. <span class="comment">[rfc.comment.3: update upon publication]</span></dd><dt style="margin-top: .5em">Applications that use this media type:</dt><dd>No known applications currently use this media type.</dd></dl><p id="rfc.section.15.1.p.3">Additional information:</p><p id="rfc.section.15.1.p.4"> </p><dl><dt style="margin-top: .5em">Magic number(s):</dt><dd>As specified for "application/xml" in <a href="#RFC3023" title="XML Media Types">[RFC3023]</a>, section 3.2.</dd><dt style="margin-top: .5em">File extension:</dt><dd>.atomsrv</dd><dt style="margin-top: .5em">Fragment identifiers:</dt><dd>As specified for "application/xml" in <a href="#RFC3023" title="XML Media Types">[RFC3023]</a>, section 5.</dd><dt style="margin-top: .5em">Base URI:</dt><dd>As specified in <a href="#RFC3023" title="XML Media Types">[RFC3023]</a>, section 6.</dd><dt style="margin-top: .5em">Macintosh File Type code:</dt><dd>TEXT</dd><dt style="margin-top: .5em">Person and email address to contact for further information:</dt><dd>Joe Gregorio &lt;joe@bitworking.org&gt;</dd><dt style="margin-top: .5em">Intended usage:</dt><dd>COMMON</dd><dt style="margin-top: .5em">Author/Change controller:</dt><dd>This specification's author(s). <span class="comment">[rfc.comment.4: update upon publication]</span></dd></dl><h2 id="rfc.section.15.2"><a href="#rfc.section.15.2">15.2</a> <a name="iana-atomcat" href="#iana-atomcat">Content-type registration for 'application/atomcat+xml'</a></h2><p id="rfc.section.15.2.p.1">An Atom Publishing Protocol Category Document, when serialized as XML 1.0, can be identified with the following media type:</p><p id="rfc.section.15.2.p.2"> </p><dl><dt style="margin-top: .5em">MIME media type name:</dt><dd>application</dd><dt style="margin-top: .5em">MIME subtype name:</dt><dd>atomcat+xml</dd><dt style="margin-top: .5em">Mandatory parameters:</dt><dd>None.</dd><dt style="margin-top: .5em">Optional parameters:</dt><dd> <dl><dt style="margin-top: .5em">"charset":</dt><dd>This parameter has identical semantics to the charset parameter of the "application/xml" media type as specified in <a href="#RFC3023" title="XML Media Types">[RFC3023]</a>.</dd></dl> </dd><dt style="margin-top: .5em">Encoding considerations:</dt><dd>Identical to those of "application/xml" as described in <a href="#RFC3023" title="XML Media Types">[RFC3023]</a>, section 3.2.</dd><dt style="margin-top: .5em">Security considerations:</dt><dd>As defined in this specification. <span class="comment">[rfc.comment.5: update upon publication]</span></dd><dt style="margin-top: .5em"></dt><dd>In addition, as this media type uses the "+xml" convention, it shares the same security considerations as described in <a href="#RFC3023" title="XML Media Types">[RFC3023]</a>, section 10.</dd><dt style="margin-top: .5em">Interoperability considerations:</dt><dd>There are no known interoperability issues.</dd><dt style="margin-top: .5em">Published specification:</dt><dd>This specification. <span class="comment">[rfc.comment.6: update upon publication]</span></dd><dt style="margin-top: .5em">Applications that use this media type:</dt><dd>No known applications currently use this media type.</dd></dl><p id="rfc.section.15.2.p.3">Additional information:</p><p id="rfc.section.15.2.p.4"> </p><dl><dt style="margin-top: .5em">Magic number(s):</dt><dd>As specified for "application/xml" in <a href="#RFC3023" title="XML Media Types">[RFC3023]</a>, section 3.2.</dd><dt style="margin-top: .5em">File extension:</dt><dd>.atomcat</dd><dt style="margin-top: .5em">Fragment identifiers:</dt><dd>As specified for "application/xml" in <a href="#RFC3023" title="XML Media Types">[RFC3023]</a>, section 5.</dd><dt style="margin-top: .5em">Base URI:</dt><dd>As specified in <a href="#RFC3023" title="XML Media Types">[RFC3023]</a>, section 6.</dd><dt style="margin-top: .5em">Macintosh File Type code:</dt><dd>TEXT</dd><dt style="margin-top: .5em">Person and email address to contact for further information:</dt><dd>Joe Gregorio &lt;joe@bitworking.org&gt;</dd><dt style="margin-top: .5em">Intended usage:</dt><dd>COMMON</dd><dt style="margin-top: .5em">Author/Change controller:</dt><dd>This specification's author(s). <span class="comment">[rfc.comment.7: update upon publication]</span></dd></dl><h2 id="rfc.section.15.3"><a href="#rfc.section.15.3">15.3</a> <a name="iana-slug" href="#iana-slug">Header field registration for 'SLUG'</a></h2><p id="rfc.section.15.3.p.1"><span class="comment">[rfc.comment.8: incomplete section --dehora]</span></p><p id="rfc.section.15.3.p.2"> </p><dl><dt style="margin-top: .5em">Header field:</dt><dd>SLUG</dd><dt style="margin-top: .5em">Applicable protocol:</dt><dd>http <a href="#RFC2616" title="Hypertext Transfer Protocol -- HTTP/1.1">[RFC2616]</a></dd><dt style="margin-top: .5em">Status:</dt><dd>standard.</dd><dt style="margin-top: .5em"> Author/Change controller:</dt><dd>IETF (iesg@ietf.org) Internet Engineering Task Force</dd><dt style="margin-top: .5em">Specification document(s):</dt><dd>draft-ietf-atompub-protocol-11.txt (<span class="comment">[rfc.comment.9: update on rfc number
                  assignment --dehora]</span>)</dd><dt style="margin-top: .5em">Related information:</dt><dd></dd></dl><hr class="noprint"><h1 id="rfc.references" class="np"><a name="rfc.section.16" href="#rfc.section.16">16.</a> <a href="#rfc.references">References</a></h1><h2 class="np" id="rfc.references.1"><a name="rfc.references.1"></a><a href="#rfc.section.16.1">16.1</a> Normative References</h2><table summary="Normative References" border="0" cellpadding="2">                                <tr><td class="topnowrap"><b><a name="RFC2047">[RFC2047]</a></b></td><td class="top">Moore, K., &#8220;<a href="http://www.ietf.org/rfc/rfc2047.txt">MIME (Multipurpose Internet Mail Extensions) Part Three: Message Header Extensions for Non-ASCII Text</a>&#8221;, RFC 2047, November 1996.</td></tr><tr><td class="topnowrap"><b><a name="RFC2119">[RFC2119]</a></b></td><td class="top"><a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, &#8220;<a href="http://www.ietf.org/rfc/rfc2119.txt">Key words for use in RFCs to Indicate Requirement Levels</a>&#8221;, BCP 14, RFC 2119, March 1997.</td></tr><tr><td class="topnowrap"><b><a name="RFC2616">[RFC2616]</a></b></td><td class="top"><a href="mailto:fielding@ics.uci.edu" title="Department of Information and Computer Science">Fielding, R.</a>, <a href="mailto:jg@w3.org" title="World Wide Web Consortium">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com" title="Compaq Computer Corporation">Mogul, J.</a>, <a href="mailto:frystyk@w3.org" title="World Wide Web Consortium">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com" title="Xerox Corporation">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com" title="Microsoft Corporation">Leach, P.</a>, and <a href="mailto:timbl@w3.org" title="World Wide Web Consortium">T. Berners-Lee</a>, &#8220;<a href="http://www.ietf.org/rfc/rfc2616.txt">Hypertext Transfer Protocol -- HTTP/1.1</a>&#8221;, RFC 2616, June 1999.</td></tr><tr><td class="topnowrap"><b><a name="RFC2617">[RFC2617]</a></b></td><td class="top"><a href="mailto:john@math.nwu.edu" title="Northwestern University, Department of Mathematics">Franks, J.</a>, <a href="mailto:pbaker@verisign.com" title="Verisign Inc.">Hallam-Baker, P.M.</a>, <a href="mailto:jeff@AbiSource.com" title="AbiSource, Inc.">Hostetler, J.L.</a>, <a href="mailto:lawrence@agranat.com" title="Agranat Systems, Inc.">Lawrence, S.D.</a>, <a href="mailto:paulle@microsoft.com" title="Microsoft Corporation">Leach, P.J.</a>, Luotonen, A., and <a href="mailto:stewart@OpenMarket.com" title="Open Market, Inc.">L. Stewart</a>, &#8220;<a href="http://www.ietf.org/rfc/rfc2617.txt">HTTP Authentication: Basic and Digest Access Authentication</a>&#8221;, RFC 2617, June 1999.</td></tr><tr><td class="topnowrap"><b><a name="RFC2818">[RFC2818]</a></b></td><td class="top">Rescorla, E., &#8220;<a href="http://www.ietf.org/rfc/rfc2818.txt">HTTP Over TLS</a>&#8221;, RFC 2818, May 2000.</td></tr><tr><td class="topnowrap"><b><a name="RFC3023">[RFC3023]</a></b></td><td class="top">Murata, M., St. Laurent, S., and D. Kohn, &#8220;<a href="http://www.ietf.org/rfc/rfc3023.txt">XML Media Types</a>&#8221;, RFC 3023, January 2001.</td></tr><tr><td class="topnowrap"><b><a name="RFC3986">[RFC3986]</a></b></td><td class="top">Berners-Lee, T., Fielding, R., and L. Masinter, &#8220;<a href="http://www.ietf.org/rfc/rfc3986.txt">Uniform Resource Identifier (URI): Generic Syntax</a>&#8221;, STD 66, RFC 3986, January 2005.</td></tr><tr><td class="topnowrap"><b><a name="RFC3987">[RFC3987]</a></b></td><td class="top">Duerst, M. and M. Suignard, &#8220;<a href="http://www.ietf.org/rfc/rfc3987.txt">Internationalized Resource Identifiers (IRIs)</a>&#8221;, RFC 3987, January 2005.</td></tr><tr><td class="topnowrap"><b><a name="RFC4287">[RFC4287]</a></b></td><td class="top">Nottingham, M. and R. Sayre, &#8220;<a href="http://www.ietf.org/rfc/rfc4287.txt">The Atom Syndication Format</a>&#8221;, RFC 4287, December 2005.</td></tr><tr><td class="topnowrap"><b><a name="RFC4346">[RFC4346]</a></b></td><td class="top">Dierks, T. and E. Rescorla, &#8220;<a href="http://www.ietf.org/rfc/rfc4346.txt">The Transport Layer Security (TLS) Protocol Version 1.1</a>&#8221;, RFC 4346, April 2006.</td></tr><tr><td class="topnowrap"><b><a name="W3C.REC-xml-20060816">[W3C.REC-xml-20060816]</a></b></td><td class="top">Bray, T., Paoli, J., Maler, E., Sperberg-McQueen, C., and F. Yergeau, &#8220;Extensible Markup Language (XML) 1.0 (Fourth Edition)&#8221;, World Wide Web Consortium Recommendation REC-xml-20060816, August 2006.</td></tr><tr><td class="topnowrap"><b><a name="W3C.REC-xml-infoset-20040204">[W3C.REC-xml-infoset-20040204]</a></b></td><td class="top">Cowan, J, Tobin, R, and A Layman, &#8220;XML Information Set (Second Edition)&#8221;, W3C REC W3C.REC-xml-infoset-20040204, February 2004.</td></tr><tr><td class="topnowrap"><b><a name="W3C.REC-xml-names-20060816">[W3C.REC-xml-names-20060816]</a></b></td><td class="top">Hollander, D, Bray, T, and A Layman, &#8220;Namespaces in XML&#8221;, World Wide Web Consortium Recommendation REC-xml-names-20060816, August 2006.</td></tr><tr><td class="topnowrap"><b><a name="W3C.REC-xmlbase-20010627">[W3C.REC-xmlbase-20010627]</a></b></td><td class="top">Marsh, J, &#8220;XML Base&#8221;, W3C REC W3C.REC-xmlbase-20010627, June 2001.</td></tr><tr><td class="topnowrap"><b><a name="W3C.REC-xmldsig-core-20020212">[W3C.REC-xmldsig-core-20020212]</a></b></td><td class="top">Solo, D., Reagle, J., and D. Eastlake, &#8220;<a href="http://www.w3.org/TR/2002/REC-xmldsig-core-20020212">XML-Signature Syntax and Processing</a>&#8221;, World Wide Web Consortium Recommendation REC-xmldsig-core-20020212, February 2002.</td></tr><tr><td class="topnowrap"><b><a name="W3C.REC-xmlenc-core-20021210">[W3C.REC-xmlenc-core-20021210]</a></b></td><td class="top">Eastlake, D. and J. Reagle, &#8220;<a href="http://www.w3.org/TR/2002/REC-xmlenc-core-20021210">XML Encryption Syntax and Processing</a>&#8221;, World Wide Web Consortium Recommendation REC-xmlenc-core-20021210, December 2002.</td></tr></table><h2 id="rfc.references.2"><a name="rfc.references.2"></a><a href="#rfc.section.16.2">16.2</a> Informative References</h2><table summary="Informative References" border="0" cellpadding="2">    <tr><td class="topnowrap"><b><a name="RNC">[RNC]</a></b></td><td class="top">Clark, J., &#8220;RELAX NG Compact Syntax&#8221;, December 2001.</td></tr><tr><td class="topnowrap"><b><a name="W3C.REC-webarch-20041215">[W3C.REC-webarch-20041215]</a></b></td><td class="top">Walsh, N and I Jacobs, &#8220;Architecture of the World Wide Web, Volume One&#8221;, W3C REC REC-webarch-20041215, December 2004.</td></tr></table><hr class="noprint"><h1 id="rfc.authors" class="np">Authors' Addresses</h1><address class="vcard"><span class="vcardline"><span class="fn">Joe Gregorio</span>
          (editor)
        <span class="n" style="display: none"><span class="Family-Name">Gregorio</span><span class="Given-Name">Joe</span></span></span><span class="org vcardline">IBM</span><span class="adr vcardline"><span class="street Street-Address vcardline">4205 South Miama Blvd.</span><span class="vcardline"><span class="Locality">Research Triangle Park</span>, <span class="Region">NC</span> <span class="Postal-Code">27709</span></span><span class="Country vcardline">US</span></span><span class="vcardline">Phone: <a href="tel:+19192723764"><span class="tel"><span class="voice">+1 919 272 3764</span></span></a></span><span class="vcardline">EMail: <a href="mailto:joe@bitworking.org"><span class="email">joe@bitworking.org</span></a></span><span class="vcardline">URI: <a href="http://ibm.com/" class="url">http://ibm.com/</a></span></address><address class="vcard"><span class="vcardline"><span class="fn">Bill de hOra</span>
          (editor)
        <span class="n" style="display: none"><span class="Family-Name">de hOra</span><span class="Given-Name">Bill</span></span></span><span class="org vcardline">Propylon Ltd.</span><span class="adr vcardline"><span class="street Street-Address vcardline">45 Blackbourne Square, Rathfarnham Gate</span><span class="vcardline"><span class="Locality">Dublin</span>, <span class="Region">Dublin</span> <span class="Postal-Code">D14</span></span><span class="Country vcardline">IE</span></span><span class="vcardline">Phone: <a href="tel:+353-1-4927444"><span class="tel"><span class="voice">+353-1-4927444</span></span></a></span><span class="vcardline">EMail: <a href="mailto:bill.dehora@propylon.com"><span class="email">bill.dehora@propylon.com</span></a></span><span class="vcardline">URI: <a href="http://www.propylon.com/" class="url">http://www.propylon.com/</a></span></address><hr class="noprint"><h1 id="rfc.section.A" class="np"><a href="#rfc.section.A">A.</a> Contributors</h1><p id="rfc.section.A.p.1">The content and concepts within are a product of the Atom community and the Atompub Working Group.</p><p id="rfc.section.A.p.2"> <span class="comment">[rfc.comment.10: chairs to compile a contribution list for 1.0 --dehora]</span> </p><hr class="noprint"><h1 id="rfc.section.B" class="np"><a href="#rfc.section.B">B.</a> <a name="schema" href="#schema">RELAX NG Compact Schema</a></h1><p id="rfc.section.B.p.1">This appendix is informative.</p><p id="rfc.section.B.p.2">The Relax NG schema explicitly excludes elements in the Atom Protocol namespace which are not defined in this revision of the specification. Requirements for Atom Protocol processors encountering such markup are given in Section 6.2 and Section 6.3 of <a href="#RFC4287" title="The Atom Syndication Format">[RFC4287]</a>.</p><p id="rfc.section.B.p.3">The Schema for Service Documents:</p><div id="rfc.figure.u.32"></div> <pre>
# -*- rnc -*-
# RELAX NG Compact Syntax Grammar for the Atom Protocol

namespace app = "http://purl.org/atom/app#"
namespace atom = "http://www.w3.org/2005/Atom"
namespace xsd = "http://www.w3.org/2001/XMLSchema"
namespace xhtml = "http://www.w3.org/1999/xhtml"
namespace local = ""

start = appService

# common:attrs

atomURI = text

appCommonAttributes =
   attribute xml:base { atomURI }?,
   attribute xml:lang { atomLanguageTag }?,
   undefinedAttribute*


atomCommonAttributes = appCommonAttributes

undefinedAttribute =
  attribute * - (xml:base | xml:lang | local:*) { text }



atomLanguageTag = xsd:string {
   pattern = "[A-Za-z]{1,8}(-[A-Za-z0-9]{1,8})*"
}

atomDateConstruct =
    appCommonAttributes,
    xsd:dateTime

# app:service

appService =
   element app:service {
      appCommonAttributes,
      ( appWorkspace+
        &amp; extensionElement* )
   }

# app:workspace

appWorkspace =
   element app:workspace {
      appCommonAttributes,
      ( atomTitle
        &amp; appCollection*
        &amp; extensionElement* )
   }

atomTitle = element atom:title { atomTextConstruct }

# app:collection

appCollection =
   element app:collection {
      appCommonAttributes,
      attribute href { atomURI  },
      ( atomTitle
        &amp; appAccept?
        &amp; appCategories*
        &amp; extensionElement* )
   }

# app:categories

atomCategory =
    element atom:category {
       atomCommonAttributes,
       attribute term { text },
       attribute scheme { atomURI }?,
       attribute label { text }?,
       undefinedContent
    }

appInlineCategories =
    element app:categories {
        attribute fixed { "yes" | "no" }?,
        attribute scheme { atomURI }?,
        (atomCategory*)
    }

appOutOfLineCategories =
    element app:categories {
        attribute href { atomURI },
        undefinedContent
    }

appCategories = appInlineCategories | appOutOfLineCategories


# app:accept

appAccept =
   element app:accept {
         appCommonAttributes,
         ( appTypeValue? )
   }


appTypeValue = ( "entry" | media-type |entry-or-media-type  )
media-type = xsd:string { pattern = "entry,(.+/.+,?)*" }
entry-or-media-type = xsd:string { pattern = "(.+/.+,?)*" }
# above is an approximation, rnc doesn't support interleaved text


# Simple Extension

simpleExtensionElement =
   element * - app:* {
      text
   }

# Structured Extension

structuredExtensionElement =
   element * - app:* {
      (attribute * { text }+,
         (text|anyElement)*)
    | (attribute * { text }*,
       (text?, anyElement+, (text|anyElement)*))
   }

# Other Extensibility

extensionElement =
   simpleExtensionElement | structuredExtensionElement

undefinedContent = (text|anyForeignElement)*

# Extensions

anyElement =
   element * {
      (attribute * { text }
       | text
       | anyElement)*
   }

anyForeignElement =
    element * - atom:* {
       (attribute * { text }
        | text
        | anyElement)*
    }

atomPlainTextConstruct =
    atomCommonAttributes,
    attribute type { "text" | "html" }?,
    text

atomXHTMLTextConstruct =
    atomCommonAttributes,
    attribute type { "xhtml" },
    xhtmlDiv

atomTextConstruct = atomPlainTextConstruct | atomXHTMLTextConstruct

anyXHTML = element xhtml:* {
    (attribute * { text }
     | text
     | anyXHTML)*
}

xhtmlDiv = element xhtml:div {
  (attribute * { text }
   | text
   | anyXHTML)*
}

# EOF
</pre> <p id="rfc.section.B.p.5">The Schema for Category Documents:</p><div id="rfc.figure.u.33"></div> <pre>
# -*- rnc -*-
# RELAX NG Compact Syntax Grammar for the Atom Protocol

namespace app = "http://purl.org/atom/app#"
namespace atom = "http://www.w3.org/2005/Atom"
namespace xsd = "http://www.w3.org/2001/XMLSchema"
namespace local = ""

start = appCategories

# common:attrs

atomCommonAttributes =
   attribute xml:base { atomUri }?,
   attribute xml:lang { atomLanguageTag }?,
   undefinedAttribute*

undefinedAttribute =
  attribute * - (xml:base | xml:lang | local:*) { text }

atomUri = text

atomLanguageTag = xsd:string {
   pattern = "[A-Za-z]{1,8}(-[A-Za-z0-9]{1,8})*"
}


atomCategory =
    element atom:category {
       atomCommonAttributes,
       attribute term { text },
       attribute scheme { atomUri }?,
       attribute label { text }?,
       undefinedContent
    }

appInlineCategories =
    element app:categories {
        attribute fixed { "yes" | "no" }?,
        attribute scheme { atomUri }?,
        (atomCategory*)
    }

appOutOfLineCategories =
    element app:categories {
        attribute href { atomURI },
        (empty)
    }

appCategories = appInlineCategories | appOutOfLineCategories


# Extensibility

undefinedContent = (text|anyForeignElement)*

anyElement =
   element * {
      (attribute * { text }
       | text
       | anyElement)*
   }

anyForeignElement =
    element * - atom:* {
       (attribute * { text }
        | text
        | anyElement)*
    }

# EOF
</pre> <hr class="noprint"><h1 id="rfc.section.C" class="np"><a href="#rfc.section.C">C.</a> Revision History</h1><p id="rfc.section.C.p.1">draft-ietf-atompub-protocol-11: Parts of PaceAppEdited. PaceSecurityConsiderationsRevised.</p><p id="rfc.section.C.p.2">draft-ietf-atompub-protocol-10: PaceRemoveTitleHeader2, PaceSlugHeader4, PaceOnlyMemberURI,PaceOneAppNamespaceOnly, PaceAppCategories, PaceExtendIntrospection, UseElementsForAppCollectionTitles3, renamed Introspection to Service, lots of good editorials suggestions, updated media example with slug, moved xml conventions to convention sections, renamed XMl related Conventions to Atom Publishing Protocol Documents, added auth header to examples, consolidated definition of all resource types into the model section, added IANA reg info for application/atomcat+xml.</p><p id="rfc.section.C.p.3">draft-ietf-atompub-protocol-09: PaceWorkspaceMayHaveCollections, PaceMediaEntries5, http://www.imc.org/atom-protocol/mail-archive/msg05322.html, and http://www.imc.org/atom-protocol/mail-archive/msg05272.html</p><p id="rfc.section.C.p.4">draft-ietf-atompub-protocol-08: added infoset ref; added wording re IRI/URI; fixed URI/IRI ; next/previous fixed as per Atom LinkRelations Attribute (http://www.imc.org/atom-protocol/mail-archive/msg04095.html); incorporated: PaceEditLinkMustToMay; PaceMissingDraftHasNoMeaning, PaceRemoveMemberTypeMust, PaceRemoveMemberTypePostMust, PaceTitleHeaderOnlyInMediaCollections, PacePreserveForeignMarkup, PaceClarifyTitleHeader, PaceClarifyMediaResourceLinks, PaceTwoPrimaryCollections;</p><p id="rfc.section.C.p.5">draft-ietf-atompub-protocol-07: updated Atom refs to RFC4287; incorporated PaceBetterHttpResponseCode; PaceClarifyCollectionAndDeleteMethodByWritingLessInsteadOfMore; PaceRemoveAcceptPostText; PaceRemoveListTemplate2; PaceRemoveRegistry; PaceRemoveWhoWritesWhat; PaceSimplifyClarifyBetterfyRemoveBogusValidityText; PaceCollectionOrderSignificance; PaceFixLostIntrospectionText; PaceListPaging; PaceCollectionControl; element typo in Listing collections para3 (was app:member-type, not app:list-template); changed post atom entry example to be valid. Dropped inline use of 'APP'. Removed nested diagram from section 4. Added ed notes in the security section.</p><p id="rfc.section.C.p.6">draft-ietf-atompub-protocol-06 - Removed: Robert Sayre from the contributors section per his request. Added in PaceCollectionControl. Fixed all the {daterange} verbage and examples so they all use a dash. Added full rnc schema. Collapsed Introspection and Collection documents into a single document. Removed {dateRange} queries. Renamed search to list. Moved discussion of media and entry collection until later in the document and tied the discussion to the Introspection element app:member-type.</p><p id="rfc.section.C.p.7">draft-ietf-atompub-protocol-05 - Added: Contributors section. Added: de hOra to editors. Fixed: typos. Added diagrams and description to model section. Incorporates PaceAppDocuments, PaceAppDocuments2, PaceSimplifyCollections2 (large-sized chunks of it anyhow: the notions of Entry and Generic resources, the section 4 language on the Protocol Model, 4.1 through 4.5.2, the notion of a Collection document, as in Section 5 through 5.3, Section 7 "Collection resources", Selection resources (modified from pace which talked about search); results in major mods to Collection Documents, Section 9.2 "Title: Header" and brokeout para to section 9.1 Editing Generic Resources). Added XML namespace and language section. Some cleanup of front matter. Added Language Sensitivity to some attributes. Removed resource descriptions from terminology. Some juggling of sections. See: http://www.imc.org/atom-protocol/mail-archive/msg01812.html.</p><p id="rfc.section.C.p.8">draft-ietf-atompub-protocol-04 - Add ladder diagrams, reorganize, add SOAP interactions</p><p id="rfc.section.C.p.9">draft-ietf-atompub-protocol-03 - Incorporates PaceSliceAndDice3 and PaceIntrospection.</p><p id="rfc.section.C.p.10">draft-ietf-atompub-protocol-02 - Incorporates Pace409Response, PacePostLocationMust, and PaceSimpleResourcePosting.</p><p id="rfc.section.C.p.11">draft-ietf-atompub-protocol-01 - Added in sections on Responses for the EditURI. Allow 2xx for response to EditURI PUTs. Elided all mentions of WSSE. Started adding in some normative references. Added the section "Securing the Atom Protocol". Clarified that it is possible that the PostURI and FeedURI could be the same URI. Cleaned up descriptions for Response codes 400 and 500.</p><p id="rfc.section.C.p.12">Rev draft-ietf-atompub-protocol-00 - 5Jul2004 - Renamed the file and re-titled the document to conform to IETF submission guidelines. Changed MIME type to match the one selected for the Atom format. Numerous typographical fixes. We used to have two 'Introduction' sections. One of them was moved into the Abstract the other absorbed the Scope section. IPR and copyright notifications were added.</p><p id="rfc.section.C.p.13">Rev 09 - 10Dec2003 - Added the section on SOAP enabled clients and servers.</p><p id="rfc.section.C.p.14">Rev 08 - 01Dec2003 - Refactored the specification, merging the Introspection file into the feed format. Also dropped the distinction between the type of URI used to create new entries and the kind used to create comments. Dropped user preferences.</p><p id="rfc.section.C.p.15">Rev 07 - 06Aug2003 - Removed the use of the RSD file for auto-discovery. Changed copyright until a final standards body is chosen. Changed query parameters for the search facet to all begin with atom- to avoid name collisions. Updated all the Entries to follow the 0.2 version. Changed the format of the search results and template file to a pure element based syntax.</p><p id="rfc.section.C.p.16">Rev 06 - 24Jul2003 - Moved to PUT for updating Entries. Changed all the mime-types to application/x.atom+xml. Added template editing. Changed 'edit-entry' to 'create-entry' in the Introspection file to more accurately reflect its purpose.</p><p id="rfc.section.C.p.17">Rev 05 - 17Jul2003 - Renamed everything Echo into Atom. Added version numbers in the Revision history. Changed all the mime-types to application/atom+xml.</p><p id="rfc.section.C.p.18">Rev 04 - 15Jul2003 - Updated the RSD version used from 0.7 to 1.0. Change the method of deleting an Entry from POSTing &lt;delete/&gt; to using the HTTP DELETE verb. Also changed the query interface to GET instead of POST. Moved Introspection Discovery to be up under Introspection. Introduced the term 'facet' for the services listed in the Introspection file.</p><p id="rfc.section.C.p.19">Rev 03 - 10Jul2003 - Added a link to the Wiki near the front of the document. Added a section on finding an Entry. Retrieving an Entry now broken out into its own section. Changed the HTTP status code for a successful editing of an Entry to 205.</p><p id="rfc.section.C.p.20">Rev 02 - 7Jul2003 - Entries are no longer returned from POSTs, instead they are retrieved via GET. Cleaned up figure titles, as they are rendered poorly in HTML. All content-types have been changed to application/atom+xml.</p><p id="rfc.section.C.p.21">Rev 01 - 5Jul2003 - Renamed from EchoAPI.html to follow the more commonly used format: draft-gregorio-NN.html. Renamed all references to URL to URI. Broke out introspection into its own section. Added the Revision History section. Added more to the warning that the example URIs are not normative.</p><hr class="noprint"><h1 class="np"><a name="rfc.ipr" href="#rfc.ipr">Intellectual Property Statement</a></h1><p>The IETF takes no position regarding the validity or scope of any Intellectual Property Rights or other rights that might be claimed to pertain to the implementation or use of the technology described in this document or the extent to which any license under such rights might or might not be available; nor does it represent that it has made any independent effort to identify any such rights. Information on the procedures with respect to rights in RFC documents can be found in BCP 78 and BCP 79.</p><p>Copies of IPR disclosures made to the IETF Secretariat and any assurances of licenses to be made available, or the result of an attempt made to obtain a general license or permission for the use of such proprietary rights by implementers or users of this specification can be obtained from the IETF on-line IPR repository at &lt;<a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>&gt;.</p><p>The IETF invites any interested party to bring to its attention any copyrights, patents or patent applications, or other proprietary rights that may cover technology that may be required to implement this standard. Please address the information to the IETF at <a href="mailto:ietf-ipr@ietf.org">ietf-ipr@ietf.org</a>.</p><h1><a name="rfc.disclaimer" href="#rfc.disclaimer">Disclaimer of Validity</a></h1><p>This document and the information contained herein are provided on an &#8220;AS IS&#8221; basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.</p><h1><a name="rfc.copyright" href="#rfc.copyright">Copyright Statement</a></h1><p>Copyright © The Internet Society (2006). This document is subject to the rights, licenses and restrictions contained in BCP 78, and except as set forth therein, the authors retain all their rights.</p><h1>Acknowledgement</h1><p>Funding for the RFC Editor function is currently provided by the Internet Society.</p></body></html>
